function getUrlVars(){for(var t=[],n,r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<r.length;i++)n=r[i].split("="),t.push(n[0]),t[n[0]]=n[1];return t}var apiItems={},priceTimer=null,loading=!1,itemsInTrades=[],takeButtonsJson={"440":{Keys:{Type:"TF_T"},"Craft items":{Type:"Craft Item"}},"570":{Rares:{Quality:"unique",Rarity:"Rarity_Rare",Type:"wearable"},Keys:{Quality:"unique",Rarity:"Rarity_Common",Type:"key"}},"730":{Keys:{Type:"CSGO_Tool_WeaponCase_KeyTag"}},"753":{"Trading cards":{item_class:"item_class_2"}}},UpdateTotal=function(){},tt=0,lastSort=null,GetTotalPrice=function(){var n=!1;$J("#trade_yours .offerheader > .total").length==0&&$J("#trade_yours .offerheader").append('<div class="total"><\/total>');$J("#trade_theirs .offerheader > .total").length==0&&$J("#trade_theirs .offerheader").append('<div class="total"><\/total>');$J(".trade_right .item").each(function(t,i){if(!$J(this).has(".price-tag").length&&i.rgItem){var r=$J('<div class="price-tag">');if(!i.rgItem.marketable){r.html("No price");r.addClass("no-price");$J(this).append(r);return}if(i.rgItem.appid==730&&AddItemDescription(i),!i.rgItem.lowestPrice&&i.rgItem.market_hash_name){getLowestPriceHandler(i.rgItem,null,function(n){$J(".trade_right .item").each(function(t,i){var r,u;$J(i).has(".price-tag").length||(AddItemDescription(i),r=i.rgItem,r.appid==n.appid&&n.market_hash_name==r.market_hash_name&&(r.lowestPrice=n.lowestPrice,u=$J('<div class="price-tag">'),u.html(r.lowestPrice),r.lowestPrice=="Can't get price"&&u.addClass("no-price"),$J(r.element).append(u)))});SetTotal()});n=!0;return}r.html(i.rgItem.lowestPrice);i.rgItem.lowestPrice=="Can't get price"&&r.addClass("no-price");$J(this).append(r);n=!1}});SetTotal()},AddItemDescription=function(n){var t=n.rgItem,i,r,u;if(!$J(this).has(".des-tag").length&&n.rgItem.appid==730){for(i="",r=0;r<t.tags.length;r++)t.tags[r].category=="Exterior"&&(i=t.tags[r].name);i!=""&&(u=$J('<div class="des-tag">'),t.float_value>=0&&(i+=" ("+t.float_value.toFixed(3)+(t.dopplerPhase?" "+dopplerPhaseNameShort[t.dopplerPhase]:"")+")"),u.html(i),$J(n).append(u))}},SetTotal=function(){var f=0,e=0,o=0,s=0,n=[{},{}],r,u,t,i;if($J("#trade_yours .price-tag").each(function(){var t=$J(this).parent(".item")[0].rgItem,u=$J(this).text(),n=getNumber(u),i,r;n=parseInt(n*100);f+=n;i=typeof t.market_fee!="undefined"?t.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default||.1;r=CalculateFeeAmount(n,i);e+=n-r.fees}),$J("#trade_yours .total").html(""+formatNumber(f/100)+" ("+formatNumber(e/100)+")"),extprice){$J("#trade_yours .item ").each(function(){var t=$J(this)[0].rgItem;t.extprice&&(t.extcrr?(n[0][t.extcrr]||(n[0][t.extcrr]=0),n[0][t.extcrr]+=t.extprice):o+=t.extprice)});t=formatNumber(o);for(i in n[0])t+="; "+n[0][i]+" "+i;$J("#trade_yours .total").append('<span class="ext-total">'+t+"<\/span>")}if($J("#trade_yours .price-tag.no-price").length>0?$J("#trade_yours .total").addClass("warning"):$J("#trade_yours .total").removeClass("warning"),r=0,u=0,$J("#trade_theirs .price-tag").each(function(){var t=$J(this).parent(".item")[0].rgItem,e=$J(this).text(),n=getNumber(e),i,f;n=parseInt(n*100);r+=n;i=typeof t.market_fee!="undefined"?t.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default||.1;f=CalculateFeeAmount(n,i);u+=n-f.fees}),$J("#trade_theirs .total").html(""+formatNumber(r/100)+" ("+formatNumber(u/100)+")"),extprice){$J("#trade_theirs .item ").each(function(){var t=$J(this)[0].rgItem;t.extprice&&(t.extcrr?(n[1][t.extcrr]||(n[1][t.extcrr]=0),n[1][t.extcrr]+=t.extprice):s+=t.extprice)});t=formatNumber(s);for(i in n[1])t+="; "+n[1][i]+" "+i;$J("#trade_theirs .total").append('<span class="ext-total">'+t+"<\/span>")}$J("#trade_theirs .price-tag.no-price").length>0?$J("#trade_theirs .total").addClass("warning"):$J("#trade_theirs .total").removeClass("warning")},itemsCount=null,lastCatname=null,SetCount=function(){var t,n,i;itemsCount={};$J("#your_slots .trade_slot .item").each(function(){for(var n,i=$J(this)[0].rgItem,t=0;t<i.tags.length;t++)n=i.tags[t],typeof itemsCount[n.category_name]=="undefined"&&(itemsCount[n.category_name]={}),typeof itemsCount[n.category_name][n.internal_name]=="undefined"&&(itemsCount[n.category_name][n.internal_name]={name:n.name,color:n.color,mycount:0,theircount:0}),itemsCount[n.category_name][n.internal_name].mycount+=1});$J("#their_slots .trade_slot .item").each(function(){for(var n,i=$J(this)[0].rgItem,t=0;t<i.tags.length;t++)n=i.tags[t],typeof itemsCount[n.category_name]=="undefined"&&(itemsCount[n.category_name]={}),typeof itemsCount[n.category_name][n.internal_name]=="undefined"&&(itemsCount[n.category_name][n.internal_name]={name:n.name,color:n.color,mycount:0,theircount:0}),itemsCount[n.category_name][n.internal_name].theircount+=1});jQuery("#sp_count").html("");jQuery("#divCats").empty();for(t in itemsCount)lastCatname==null&&(lastCatname=t),n=$J('<a href="javascript:void(0)">'),i=t,n.html(i),n.click(function(){ShowCount($J(this).text())}),$J("#divCats").append(n);lastCatname&&ShowCount(lastCatname)},ShowCount=function(n){var r=SIHLang.tradeoffers.youritems+" ("+jQuery("#your_slots .trade_slot .item").length+"):<br />",u=SIHLang.tradeoffers.theiritem+" ("+jQuery("#their_slots .trade_slot .item").length+"):<br />",i,t;if(itemsCount[n]){for(i in itemsCount[n])t=itemsCount[n][i],t.mycount&&(r+='<span style="color:#'+t.color+'">'+t.name+" ("+t.mycount+' <a href="#" class="remove-category" title="Remove all" data-slot="your" data-category="'+n+'" data-name="'+i+'" >x<\/a>)<\/span> '),t.theircount&&(u+='<span style="color:#'+t.color+'">'+t.name+" ("+t.theircount+' <a href="#" class="remove-category" title="Remove all" data-slot="their" data-category="'+n+'" data-name="'+i+'" >x<\/a>)<\/span> ');lastCatname=n;SetCookie("lastCategoryCount",lastCatname,3650,"/tradeoffer/")}$J("#divDetail").html(r+"<br />"+u)},RemoveItems=function(n){var t,i;if(!g_bReadOnly){if(n!=null){var t=n.data("slot")==="your"?!0:!1,r=n.data("category"),u=n.data("name"),i=t?"#your_slots":"#their_slots";$J(i+" .trade_slot .item").each(function(){for(var i,n=$J(this)[0].rgItem,f=$J(this)[0],t=0;t<n.tags.length;t++)if(i=n.tags[t],i.category_name===r&&i.internal_name===u){if(BIsInTradeSlot(f)&&CleanupSlot(f.parentNode.parentNode),n.is_stackable){SetStackableItemInTrade(n,0);return}RevertItem(n);n.homeElement.down(".slot_actionmenu_button").show();GTradeStateManager.RemoveItemFromTrade(n)}})}else t=$J("#inventory_select_your_inventory").hasClass("active")?!0:!1,i=t?"#your_slots":"#their_slots",$J(i+" .trade_slot .item").each(function(){var n=$J(this)[0].rgItem,t=$J(this)[0];if(BIsInTradeSlot(t)&&CleanupSlot(t.parentNode.parentNode),n.is_stackable){SetStackableItemInTrade(n,0);return}RevertItem(n);n.homeElement.down(".slot_actionmenu_button").show();GTradeStateManager.RemoveItemFromTrade(n)});SetCount();setTimeout(function(){$J('.itemHolder.trade_slot[id=""]').remove()},300)}},RemoveItemsByClass=function(n){if(!g_bReadOnly){var t=$J("#inventory_select_your_inventory").hasClass("active")?!0:!1,i=t?"#your_slots":"#their_slots";$J(i+" .trade_slot .item."+n).each(function(){var n=$J(this)[0].rgItem,t=$J(this)[0];if(BIsInTradeSlot(t)&&CleanupSlot(t.parentNode.parentNode),n.is_stackable){SetStackableItemInTrade(n,0);return}RevertItem(n);n.homeElement.down(".slot_actionmenu_button").show();GTradeStateManager.RemoveItemFromTrade(n)});SetCount();setTimeout(function(){$J('.itemHolder.trade_slot[id=""]').remove()},300)}},RemoveItemsByPrice=function(n){if(!g_bReadOnly){var t=$J("#inventory_select_your_inventory").hasClass("active")?!0:!1,i=t?"#your_slots":"#their_slots",r=parseFloat($J("#txt_remove_queue").val());$J(i+" .trade_slot .item").each(function(){var t=$J(this)[0].rgItem,i=$J(this)[0],u;if(t&&(t.lowestPrice||t.extprice)&&(u=t.lowestPrice?parseFloat(getNumber(t.lowestPrice)):t.extprice,u*n>r*n)){if(BIsInTradeSlot(i)&&CleanupSlot(i.parentNode.parentNode),t.is_stackable){SetStackableItemInTrade(t,0);return}RevertItem(t);t.homeElement.down(".slot_actionmenu_button").show();GTradeStateManager.RemoveItemFromTrade(t)}});SetCount();setTimeout(function(){$J('.itemHolder.trade_slot[id=""]').remove()},300)}},CheckItem=function(n,t){var r,u,i;if(n==null)return!1;if(t==null)return!0;if(jQuery.isNumeric(t))return t==n.classid;for(r=!0,u=!1,i=0;i<n.tags.length;i++)t[n.tags[i].category]&&n.tags[i].internal_name!=t[n.tags[i].category]&&(r=!1),t[n.tags[i].category]&&n.tags[i].internal_name==t[n.tags[i].category]&&(u=!0);return r&&u},CheckItemByPrice=function(n,t){if(n==null)return!1;var i=parseFloat($J("#txt_remove_queue").val());return!i||!n.extprice?!1:i<n.extprice&&t||i>n.extprice&&!t?!0:!1},Trash=["Axe","Omniknight","Morphling","Witch Doctor","Broodmother"],CheckTrashHero=function(n){var t,i;if(!n||!n.tags)return!1;for(t=0;t<n.tags.length;t++)if(n.tags[t].category=="Hero")for(i=0;i<Trash.length;i++)if(n.tags[t].name===Trash[i])return!0;return!1},CheckIntrade=function(n){return n?$J(n).hasClass("item-in-trade")?!0:!1:!1},CheckDuplicate=function(n){if(!n||!n.market_hash_name)return!1;var i=n.market_hash_name,r=$J("#inventory_select_their_inventory").hasClass("active"),u=r?"#their_slots":"#your_slots",f=$J("#Txt_Dup").val(),t=parseInt(f);return $J(u+" .item").each(function(){if(this.rgItem&&this.rgItem.market_hash_name==i&&(t--,t==0))return!1}),t==0},TakeMany=!1,MoveItemWithCount=function(elItem){var val=$J("#Txt_Num").val(),t=val==""?0:eval(val),dup,idup,a;if(val==""&&g_bTradeOffer||parseInt(t)>0){if($J("#Ck_SkipIntrade").is(":checked")&&CheckIntrade(elItem))return;if(dup=$J("#Txt_Dup").val(),idup=parseInt(dup),idup&&idup>0&&CheckDuplicate(elItem.rgItem))return;MoveItemToTrade(elItem)}else return;val!=""&&(a=parseInt(t)-1,$J("#Txt_Num").val(a))},MoveItem=function(n){var t,r,i;if(g_bReadOnly)return!1;g_bTradeOffer?(TakeMany=!0,t='.inventory_ctn:visible div.inventory_page .itemHolder[style!="display: none;"] .item',$J("#Txt_Num").val()==""&&(t=".inventory_ctn:visible div.inventory_page .itemHolder:visible .item"),r=$J(t),r.each(function(){var t=$J(this)[0].rgItem;n&&n.byprice!=null&&CheckItemByPrice(t,n.byprice)?MoveItemWithCount($J(this)[0]):(n===null||CheckItem(t,n))&&MoveItemWithCount($J(this)[0])}),SetCount(),window.autocheckofferprice&&GetTotalPrice(),TakeMany=!1):(i=!0,lastFilter=n,$J('.inventory_ctn:visible div.inventory_page .itemHolder[style!="display: none;"] .item').each(function(){var t=$J(this)[0].rgItem;if((n===null||CheckItem(t,n))&&i){MoveItemWithCount($J(this)[0]);i=!1;return}}))},SwapInner=function(){},SortItem=function(n){lastSort=n;var i=n?1:-1,t=$J("#your_slots .itemHolder.trade_slot:has(.price-tag,.p-price)");t.sort(function(n,t){var f=$J(n).find(".item")[0].rgItem,e=$J(t).find(".item")[0].rgItem,r=parseFloat(getNumber($J(n).find(".price-tag").text())),u=parseFloat(getNumber($J(t).find(".price-tag").text()));return(!r&&f.extprice&&(r=f.extprice),!u&&e.extprice&&(u=e.extprice),r===u&&(r=f.market_hash_name,u=e.market_hash_name),r===u&&(r=n.id,u=t.id),r>u)?1*i:r<u?-1*i:0});t.detach().prependTo($J("#your_slots"));t=$J("#their_slots .itemHolder.trade_slot:has(.price-tag)");t.sort(function(n,t){var r=parseFloat(getNumber($J(n).find(".price-tag").text())),u=parseFloat(getNumber($J(t).find(".price-tag").text()));return(r===u&&(r=$J(n).find(".item")[0].rgItem.market_hash_name,u=$J(t).find(".item")[0].rgItem.market_hash_name),r===u&&(r=n.id,u=t.id),r>u)?1*i:r<u?-1*i:0});t.detach().prependTo($J("#their_slots"))},lastFilter=null,orgTradePageSelectInventory=null,ModifyItemDisplay=function(){UserThem.OnLoadInventoryComplete=UserYou.OnLoadInventoryComplete=function(n,t,i){var f,l,s,h,u,c,r,e,o;if(this.cLoadsInFlight--,n.responseJSON&&n.responseJSON.success){f=new CInventory(this,t,i,n.responseJSON.rgInventory,n.responseJSON.rgCurrency);this.addInventory(f);l=f.getInventoryElement();l.hide();$("inventories").insert(l);s=f.getTagContainer();h=$("filter_options");h&&s&&(s.hide(),h.insert(s),h.addClassName("filter_collapsed"));u={};for(c in n.responseJSON.rgInventory)r=n.responseJSON.rgInventory[c],u[r.classid]?u[r.classid]++:u[r.classid]=1;for(c in n.responseJSON.rgInventory)r=n.responseJSON.rgInventory[c],u[r.classid]&&u[r.classid]>1&&r.descriptions&&(r.descriptions[0].iscount||r.descriptions.unshift({iscount:!0,type:"html",value:'Number owned: <i style="color: rgb(153, 204, 255); font-size: 16px">'+u[r.classid]+"<\/i>"}));t==570?$J.ajax({url:"https://api.steampowered.com/IEconItems_570/GetPlayerItems/v0001/",strSteamId:this.strSteamId,data:{SteamID:this.strSteamId,key:apiKey},success:function(n){apiItems[this.strSteamId]||(apiItems[this.strSteamId]={});n&&n.result&&n.result.status==1&&(apiItems[this.strSteamId][t]=n.result.items,$J.each(apiItems[this.strSteamId][t],function(n,t){var i=$J("div.item[id=item570_2_"+t.id+"]");t.equipped&&(i.addClass("item-equipped"),i.each(function(){this.rgItem.equipped=!0}));i.each(function(){this.rgItem.defindex=t.defindex})}))},error:function(){}}):t==730?(numberOfRetries=0,activeUser=this,apiTimer&&window.clearTimeout(apiTimer),GetCSGOItems()):t==440&&$J.ajax({url:"https://api.steampowered.com/IEconItems_440/GetPlayerItems/v0001/",strSteamId:this.strSteamId,data:{SteamID:this.strSteamId,key:apiKey},success:function(n){apiItems[this.strSteamId]||(apiItems[this.strSteamId]={});n&&n.result&&n.result.status==1&&(apiItems[this.strSteamId][t]=n.result.items,$J.each(apiItems[this.strSteamId][t],function(n,t){var i=$J("div.item[id=item440_2_"+t.id+"]");t.equipped&&(i.addClass("item-equipped"),i.each(function(){this.rgItem.equipped=!0}));i.each(function(){this.rgItem.defindex=t.defindex;this.rgItem.apivalue=t})}));var i=ExternalPrices[g_ActiveInventory.appid].apis[parseInt($J("#cb_ExternalPrices").val())];i&&i.api&&i.api.SetPrice&&i.api.SetPrice(g_ActiveInventory.appid)},error:function(){}});window.setTimeout(function(){$J.each(f.rgInventory,function(){var n=this,t;n&&bookmarkeditems&&(t=n.appid+"/"+encodeURIComponent(n.market_hash_name).replace("(","%28").replace(")","%29"),bookmarkeditems[t]&&$J("div.item[id=item"+n.appid+"_"+n.contextid+"_"+n.id+"]").addClass("bookmarked"))})},200);window.extprice&&ExternalPrices[t]&&(e=GetCookie("lastext_"+t),e=e!=null?parseInt(e):0,o=null,$J.each(ExternalPrices[t].apis,function(n){this.api&&this.api.GetPrices&&(this.isApproved&&(o=this.api),o||n!=e||(o=this.api),this.api.GetPrices(f.rgInventory,!1))}),window.setTimeout(function(){o.SetPrice(t)},100))}else{this.OnInventoryLoadFailed(n,t,i);return}this.ShowInventoryIfActive(t,i);$J(window).trigger("resize.DynamicInventorySizing");$J.each(itemsInTrades,function(){var n=this,i;n.appid==t&&(i=$J("div.item[id=item"+n.appid+"_"+n.context+"_"+n.id+"]"),i.addClass("item-in-trade"))});g_bIsTrading&&RedrawCurrentTradeStatus()}},numberOfRetries=0,maxRetries=10,activeUser=null,apiTimer=null,dopplerPhaseName={421:"Phase 4",420:"Phase 3",419:"Phase 2",418:"Phase 1",417:"Black Pearl",416:"Sapphire",415:"Ruby"},dopplerPhaseNameShort={"Phase 4":"P4","Phase 3":"P3","Phase 2":"P2","Phase 1":"P1","Black Pearl":"BP",Sapphire:"Sap",Ruby:"Rub"},GetCSGOItems=function(){$J.ajax({url:"https://api.steampowered.com/IEconItems_730/GetPlayerItems/v0001/",strSteamId:activeUser.strSteamId,data:{SteamID:activeUser.strSteamId,key:apiKey},success:function(n){apiItems[this.strSteamId]||(apiItems[this.strSteamId]={});n&&n.result&&n.result.status==1&&(apiItems[this.strSteamId][730]=n.result.items,$J.each(apiItems[this.strSteamId][730],function(n,t){var e=$J("div.item[id=item730_2_"+t.id+"]"),r,u,i,f;if(t.attributes)for(r=-1,u=-1,i=0;i<t.attributes.length;i++)t.attributes[i].defindex==8&&(r=t.attributes[i].float_value),t.attributes[i].defindex==6&&(u=t.attributes[i].float_value);r>=0&&(f="",u>0&&(f=dopplerPhaseName[u]||""),e.each(function(){this.rgItem.float_value||(this.rgItem.float_value=r,this.rgItem.dopplerPhase=f,this.rgItem.descriptions&&(this.rgItem.descriptions=this.rgItem.descriptions.clone(),this.rgItem.descriptions.unshift({type:"html",value:"Float value: <strong style='color: #FF0'>"+r.toFixed(4)+"<\/strong> "+f,floatvalue:!0})))}))}))},error:function(){(numberOfRetries++,numberOfRetries>=maxRetries)||(apiTimer=window.setTimeout(GetCSGOItems,1e3+200*numberOfRetries))}})},ModifySelectInventory=function(){orgTradePageSelectInventory=TradePageSelectInventory;TradePageSelectInventory=function(n,t,i,r){orgTradePageSelectInventory(n,t,i,r);SetupTakeButtons(t);SetupExternalDropdown(t)}},SetupTakeButtons=function(n){$J("#divTakeButtons .take-button").remove();takeButtonsJson[n]&&$J.each(takeButtonsJson[n],function(n,t){var i=$J('<input type="button" class="take-button" value="'+n+'"/>');i.data("exp",t);$J("#divTakeButtons").append(i)})},SetupExternalDropdown=function(n){if($J("#cb_ExternalPrices").empty(),ExternalPrices[n]){var t=GetCookie("lastext_"+n);t=t!=null?parseInt(t):0;$J.each(ExternalPrices[n].apis,function(n){if(this.api&&this.api.GetPrices){var i=$J('<option value="'+n+'"><\/option>');i.text(this.name);this.isApproved?i.prop("selected",!0):n==t&&i.prop("selected",!0);$J("#cb_ExternalPrices").append(i)}})}},_verifyUsers=function(){chrome.runtime.sendMessage(SIHID,{type:"CSGOFAST",data:"bots"},function(n){var i,t;if(n.success)for(i=n.bots,t=0;t<i.length;t++)if(g_ulTradePartnerSteamID==i[t])return $J("#trade_theirs h2").append('<a href="#" class="verified-user" title="Verified by CSGOFAST">Verified by CSGOFAST<\/a>'),!1})},queryStr;jQuery(function(){var e,t,n,i,r,u,f;typeof custombuttons!="undefined"&&(takeButtonsJson=custombuttons);e=/item(\d+)_(\d+)_(\d+)/i;t=GetCookie("lastCategoryCount");t&&(lastCatname=t);jQuery("#inventory_displaycontrols").after('<div style="clear:both"><span id="sp_count"><\/span><\/div><div><span data-lang="tradeoffers.noofitems">'+SIHLang.tradeoffers.noofitems+'<\/span>: <input type="text" id="Txt_Num" value="" style="width:50px; text-align:right; padding-right: 3px"/><label for="Ck_SkipIntrade"><input type="checkbox" id="Ck_SkipIntrade" /> <span data-lang="tradeoffers.skipintrade">'+SIHLang.tradeoffers.skipintrade+'<\/span><\/label><div style="padding:8px 0px"><label for="Txt_Dup"><span data-lang="tradeoffers.noduplicate">'+SIHLang.tradeoffers.noduplicate+'<\/span><\/label>: <input type="text" id="Txt_Dup" value="" style="width:50px; text-align:right; padding-right: 3px"/><\/div><div id="divTakeButtons"><input type="button" id="Bt_RemoveAll" value="'+SIHLang.tradeoffers.removeall+'" class="take-gen-button" /><input type="button" id="Bt_TakeAll" value="'+SIHLang.tradeoffers.takeall+'" class="take-gen-button" /><\/div><\/div><div class="items-count-panel"><div id="divCats"><\/div><div id="divDetail"><\/div><\/div>');jQuery("#Bt_TakeAll").click(function(){MoveItem(null)});jQuery("#Bt_RemoveAll").click(function(){RemoveItems(null)});g_ActiveInventory&&g_ActiveInventory.appid&&(SetupTakeButtons(g_ActiveInventory.appid),SetupExternalDropdown(g_ActiveInventory.appid));$J("#divTakeButtons").on("click","input.take-button",function(){var n=$J(this).data("exp");n&&MoveItem(n)});$J(".trade_left").on("click",".item",function(n){n.ctrlKey&&this.rgItem&&this.rgItem.classid&&MoveItem(this.rgItem.classid)});$J(".trade_right").on("click",".item",function(n){if(n.ctrlKey&&this.rgItem&&this.rgItem.classid){var t=this.rgItem.classid;$J(this).parents(".trade_item_box").find(".item").each(function(){if(this.rgItem&&this.rgItem.classid==t){var n=this.rgItem,i=this;if(BIsInTradeSlot(i)&&CleanupSlot(i.parentNode.parentNode),n.is_stackable){SetStackableItemInTrade(n,0);return}RevertItem(n);n.homeElement.down(".slot_actionmenu_button").show();GTradeStateManager.RemoveItemFromTrade(n)}});SetCount();window.autocheckofferprice&&GetTotalPrice();setTimeout(function(){$J('.itemHolder.trade_slot[id=""]').remove()},300)}});n=$J('<div class="right-panel">');n.append('<fieldset class="sort"><legend>'+SIHLang.queue.removeitem+'<\/legend><input type="text" class="num" id="txt_remove_queue" /><a href="#" id="bt_lower">'+SIHLang.queue.removelower+'<\/a><a href="#" id="bt_higher">'+SIHLang.queue.removehigher+'<\/a><a href="#" id="bt_intrade">'+SIHLang.queue.removeintrade+'<\/a><a href="#" id="bt_removeequipped">'+SIHLang.queue.removeequipped+'<\/a><a href="#" id="bt_takelower">'+SIHLang.queue.takelower+'<\/a><a href="#" id="bt_takehigher">'+SIHLang.queue.takehigher+"<\/a><\/fieldset>");i=$J('<fieldset class="sort"><legend>Sort<\/legend><\/fieldset>');i.append('<a href="javascript:void(0)" id="btSortPrice">&nbsp; Price<\/a>');n.append(i);r=$J('<fieldset class="sort"><legend>Functions<\/legend><\/fieldset>');r.append('<a href="#" id="Bt_Count">Recount<\/a><a href="#" id="Bt_GetTotal">'+SIHLang.tradeoffers.totalprice+"<\/a>");n.append(r);window.extprice&&(u=$J('<fieldset class="sort"><legend>External prices<\/legend><\/fieldset>'),f=$J('<select class="side-dropdown" id="cb_ExternalPrices"><\/select>'),u.append(f),n.append(u),f.change(function(){var n=ExternalPrices[g_ActiveInventory.appid].apis[parseInt($J(this).val())];n&&n.api&&n.api.SetPrice&&(n.api.SetPrice(g_ActiveInventory.appid),SetCookie("lastext_"+g_ActiveInventory.appid,$J(this).val(),356))}));$J(".trade_area").append(n);$J("#btSortPrice").click(function(){$J(this).data("asc")?($J(this).html("▲ Price"),$J(this).data("asc",!1),SortItem(!0)):($J(this).html("▼ Price"),$J(this).data("asc",!0),SortItem(!1))});$J("#bt_intrade").click(function(n){n.preventDefault();RemoveItemsByClass("item-in-trade")});$J("#bt_removeequipped").click(function(n){n.preventDefault();RemoveItemsByClass("item-equipped")});$J("#bt_lower").click(function(n){n.preventDefault();RemoveItemsByPrice(-1)});$J("#bt_higher").click(function(n){n.preventDefault();RemoveItemsByPrice(1)});jQuery("#bt_takelower").click(function(){return MoveItem({byprice:!1}),!1});jQuery("#bt_takehigher").click(function(){return MoveItem({byprice:!0}),!1});g_bTradeOffer||(GTradeStateManager.SetItemInTrade=function(n,t,i){CancelTradeStatusPoll();var r={sessionid:g_sessionID,appid:n.appid,contextid:n.contextid,itemid:n.id,slot:t};i&&(r.amount=i);new Ajax.Request(window.location.protocol+"//steamcommunity.com/trade/"+g_ulTradePartnerSteamID+"/additem/",{method:"post",parameters:r,onComplete:function(n){HandleDropFailure(n);SetCount();MoveItem(lastFilter)}})});jQuery("#sp_count,#Bt_Count").click(function(){return SetCount(),!1});jQuery("#Bt_GetTotal").click(function(){return GetTotalPrice(),!1});$J("#divDetail").on("click",".remove-category",function(){return RemoveItems($J(this)),!1});MoveItemToTrade=function(n){var t=n.rgItem;t.is_stackable?ShowStackableItemDialog(n):FindSlotAndSetItem(t);TakeMany||(SetCount(),window.autocheckofferprice&&GetTotalPrice(),lastSort!=null&&SortItem(lastSort))};MoveItemToInventory=function(n){var t=n.rgItem;if(BIsInTradeSlot(n)&&CleanupSlot(n.parentNode.parentNode),t.is_stackable){SetStackableItemInTrade(t,0);return}RevertItem(t);t.homeElement.down(".slot_actionmenu_button").show();GTradeStateManager.RemoveItemFromTrade(t);SetCount();window.autocheckofferprice&&GetTotalPrice();lastSort!=null&&SortItem(lastSort)};StopWatchingForUnload();ModifyItemDisplay();ModifySelectInventory();window.setTimeout(function(){if(_verifyUsers(),!hidebanner){var t=$J('<fieldset class="sort" style="margin-top:50px"><legend>SIH\'s Sponsor<\/legend><\/fieldset>');t.append('<a href="https://goo.gl/g51bJg" target="_blank" class="sponsor" title="CSGOFAST"><img src="chrome-extension://'+SIHID+'/assets/csgofast_small.png" alt="" style="width:100%"><\/a>');n.append(t)}},200)});var econItemExp=/data-economy-item="(\d+)\/(\d+)\/(\d+)\/(\d+)"/gi,GetItemsInTrades=function(){$J.ajax({url:"//steamcommunity.com/id/temp/tradeoffers/sent/",success:function(n){for(var t=null,i;t=econItemExp.exec(n);)itemsInTrades.push({id:t[3],appid:parseInt(t[1]),context:parseInt(t[2])}),i=$J("div.item[id=item"+t[1]+"_"+t[2]+"_"+t[3]+"]"),i.addClass("item-in-trade")}})}(),CheckSteamRep=function(){$J.ajax({url:"https://api.steampowered.com/ISteamUser/GetPlayerBans/v1/",data:{steamids:g_ulTradePartnerSteamID,key:apiKey},success:function(n){if(n&&n.players&&n.players.length){var t=n.players[0],r=$J('<div class="rep"><div class="ban-info"><\/div><\/div>'),i=r.find(".ban-info");i.append("<span>Trade Ban: <strong>"+(t.EconomyBan||"")+"<\/strong><\/span> - ");i.append("<span>VAC Ban: <strong>"+(t.VACBanned?"VAC Banned":"none")+"<\/strong>"+(t.DaysSinceLastBan?" ("+t.DaysSinceLastBan+" days since last ban)":"")+"<\/span> - ");i.append("<span>Community Ban: <strong>"+(t.CommunityBanned?"Banned":"none")+"<\/strong><\/span>");i.show();$J(".trade_partner_header.responsive_trade_offersection.top").after(r)}}})};queryStr=getUrlVars();queryStr.sihaccept&&queryStr.sihaccept==g_sessionID&&CTradeOfferStateManager.ConfirmTradeOffer();
/*
//# sourceMappingURL=tradeoffer.script.min.js.map
*/