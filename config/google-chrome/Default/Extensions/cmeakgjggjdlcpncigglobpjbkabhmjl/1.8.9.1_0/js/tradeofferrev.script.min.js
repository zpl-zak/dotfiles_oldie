var itemRegExp=/BuildHover.*;/i,_cacheItems={},g_rgWalletInfo={wallet_fee:1,wallet_fee_base:0,wallet_fee_minimum:1,wallet_fee_percent:.05,wallet_publisher_fee_percent_default:.1},_tradesTimers={},_openedWins={},UpdateTotal=function(n){var t=$J('div[data-economy-item="'+n.appid+"/"+n.contextid+"/"+n.id+"/"+n.owner+'"]'),i=t.parent(".tradeoffer_item_list");i.each(function(){var t=$J(this),r=t.find(".total_price"),u=0,f=0,i=0,e=0,n;t.find(".trade_item").each(function(){var n;if(e++,n=this.rgItem,n){if(n.lowestPrice){var t=parseInt(parseFloat(getNumber(n.lowestPrice))*100),r=typeof n.market_fee!="undefined"?n.market_fee:.1,o=CalculateFeeAmount(t,r);f+=(t-o.fees)/100;u+=parseFloat(getNumber(n.lowestPrice))}n.gemPrices!="undefined"&&n.gemPrices!=null&&$J.each(n.gemPrices,function(n,t){i+=parseFloat(getNumber(t.lowestPrice))})}this.inited==null&&PrebuildData(this,$J(this).attr("data-economy-item"))});n=""+formatNumber(u)+" ("+formatNumber(f)+")";i>0&&(n+=" - Gems total price: "+formatNumber(i));n+=' <span style="float: right; padding-right: 15px">'+e+" item(s)<\/span>";t.find(".price-tag.no-price").length>0&&r.addClass("warning");r.html(n)})},CheckItem=function(n,t){var i,r;if(!t.marketable){i=$J('<div class="price-tag">');i.html("No price");i.addClass("no-price");$J('div[data-economy-item^="'+t.appid+"/"+t.contextid+"/"+t.id+'/"]').append(i);return}getLowestPriceHandler(t,n,function(n){var i=$J('div[data-economy-item^="'+t.appid+"/"+t.contextid+"/"+t.id+'/"]');i.each(function(){if($J(this).find(".price-tag").length==0){var t=$J('<div class="price-tag">');t.html(n.lowestPrice);n.lowestPrice=="Can't get price"&&t.addClass("no-price");$J(this).append(t)}})});_cacheItems[t.appid+"/"+t.contextid+"/"+t.id]=t;r=$J('div[data-economy-item^="'+t.appid+"/"+t.contextid+"/"+t.id+'/"]');r.each(function(){this.rgItem=t})},PrebuildData=function(n,t){var i=t.split("/"),u,s,h,e,o,r,f;if(i.length==3||i.length==4){if(n.inited=!0,r=null,u=i[0],u=="classinfo")u=i[1],s=i[2],h=i.length>3?i[3]:0,r="economy/itemclasshover/"+u+"/"+s+"/"+h+"?content_only=1&l=english";else{if(e=i[1],o=i[2],_cacheItems[u+"/"+e+"/"+o]!=null)return;r="economy/itemhover/"+u+"/"+e+"/"+o;r+="?content_only=1&omit_owner=1&l=english";i.length==4&&i[3]&&(f=i[3],r+=f.indexOf("id:")==0?"&o_url="+f.substr(3):"&o="+f)}$J.ajax({url:window.location.protocol+"//steamcommunity.com/"+r,cache:!0,data:{l:"english"}}).done(function(data){var m_$Data=$J(data),match=itemRegExp.exec(data);match&&eval(match[0].replace("BuildHover","CheckItem"))})}else return null},jpcallback=function(){},GetAllPrice=function(n){n.find(".trade_item").each(function(){this.inited==null&&PrebuildData(this,$J(this).attr("data-economy-item"))})};$J(function(){var t=$J('<div style="color: red; z-index: 2">Warning! This is an empty trade offer, you will not receive anything after accepted.<br /> <a href="https://support.steampowered.com/kb_article.php?ref=2178-QGJV-0708#whatoffer" target="_blank">Steam wallet funds can not be included in trade, or trade offer.<\/a><\/div>'),n;t.click(function(n){n.stopPropagation()});n=$J(".tradeoffer_items.primary .tradeoffer_item_list:not(:has(.trade_item ))");n.append(t);n.parents(".tradeoffer_items_ctn").find(".link_overlay").css("top","110px");$J(".tradeoffer_item_list").append('<div class="total_price total" style="cursor:pointer; font-weight: bold; font-size: 15px">&nbsp;<\/div>');$J(".tradeoffer_footer_actions").prepend('<a class="offer_price whiteLink" href="#" style="cursor:pointer;">Get total price<\/a> | ');window.quickaccept&&$J(".tradeoffer_footer_actions").prepend('<a class="accept_trade whiteLink" href="#" style="cursor:pointer;">Quick accept<\/a> | ');$J(".offer_price").click(function(){return GetAllPrice($J(this).parents(".tradeoffer")),!1});$J(".accept_trade").click(function(){var n,t;return $J(this).prop("disabled")?!1:(n=$J(this).parents(".tradeoffer").prop("id").substr(13),_tradesTimers[n])?(window.clearInterval(_tradesTimers[n].timer),_tradesTimers[n]=null,$J(this).html("Quick accept"),!1):window.quickacceptprompt&&!confirm("Are you sure?")?!1:(window.qadelay?(_tradesTimers[n]={timer:window.setInterval("TradeAcceptTimerTick("+n+")",1e3),remain:window.qadelay},$J(this).html("Cancel ("+(window.qadelay<10?"0":"")+window.qadelay+")")):window.qadelay==0&&(t=$J(this),t.html("Accepting..."),t.prop("disabled",!0),AcceptTradeOffer(n)),!1)});$J(".total_price").click(function(){var n=$J(this).parent(".tradeoffer_item_list");GetAllPrice(n)});$J(function(){$J(window).on("message",function(n){var i=n.originalEvent.origin,t=n.originalEvent.data;i&&t&&("http://steamcommunity.com/".indexOf(i)==0||"https://steamcommunity.com/".indexOf(i)==0)&&(t.type=="accepted"||t.type=="await_confirm"&&_openedWins[t.tradeofferid])&&_openedWins[t.tradeofferid].close()})})});var TradeAcceptTimerTick=function(n){if(_tradesTimers[n]){var t=_tradesTimers[n].remain,i=$J("#tradeofferid_"+n).find(".accept_trade");t==0?(i.html("Accepting..."),i.prop("disabled",!0),window.clearInterval(_tradesTimers[n].timer),AcceptTradeOffer(n)):(t--,_tradesTimers[n].remain=t,i.html("Cancel ("+(t<10?"0":"")+t+")"))}},regRpLink=/javascript:ReportTradeScam\( '(\d+)',/,AcceptTradeOffer=function(n){_openedWins[n]=window.open("https://steamcommunity.com/tradeoffer/"+n+"/?sihaccept="+g_sessionID,"HiddenTradeOffer"+n,"height=10,width=10,resize=yes,scrollbars=yes");return};
/*
//# sourceMappingURL=tradeofferrev.script.min.js.map
*/