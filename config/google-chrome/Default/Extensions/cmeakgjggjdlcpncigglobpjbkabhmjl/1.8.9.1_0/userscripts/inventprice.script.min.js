var lowestPriceWithFeeRegExp=/<span class="market_listing_price market_listing_price_with_fee">\s*(((?!Sold).)*?)\s*<\/span>/i,lowestPriceWithoutFeeRegExp=/<span class="market_listing_price market_listing_price_without_fee">\s*(((?!Sold).)*?)\s*<\/span>/i,insGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!:).)*?): \d+<\/span><br><span style="font-size: 12px">Inscribed Gem<\/span>/i,kinGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!<).)*?)<\/span><br><span style="font-size: 12px">Kinetic Gem<\/span>/i,priGemExp=/<span style="font-size: 18px; color: rgb\(\d+, \d+, \d+\)">(((?!<).)*?)<\/span><br><span style="font-size: 12px">Prismatic Gem<\/span>/i,ethGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!<).)*?)<\/span><br><span style="font-size: 12px">Ethereal Gem<\/span>/i,corGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!:).)*?): \d+<\/span><br><span style="font-size: 12px">Foulfell Shard<\/span>/i,masGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!:).)*?): \d+<\/span><br><span style="font-size: 12px">Rune of the Duelist Indomitable<\/span>/i,buyingExp=/javascript:BuyMarketListing\('listing', '(\d+)', (\d+), '(\d+)', '(\d+)'\)/,cachePrices={},sellingStack={},selectmode=!1,currencyId=1,sellcurrencyId=1,lastSelectedItem=null,apiItems={},someIds=["76561198090644557","abcdef","76561198028005207"];typeof BShouldSuppressFades=="undefined"&&(BShouldSuppressFades=function(){return!1});var checkPrice=function(){var n=$J("#iteminfo0").is(":visible")?0:1,t=$J("#iteminfo"+n+"_item_name").text();getLowestPriceHandler()},reloadDes=function(){var n="iteminfo"+iActiveSelectView,t=$(n+"_item_descriptors");PopulateDescriptions(t,g_ActiveInventory.selectedItem.descriptions)},mediumPrice=0,mediumName="",getSetLink=function(n,t,i){var u=n.market_hash_name||n.value,r=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name="+(i?"Genuine%20":"")+encodeURIComponent(u),f;if(n.setLink=r,cachePrices[r]&&cachePrices[r].lowestPrice){n.app_data.price=cachePrices[r].lowestPrice;n.app_data.market_hash_name=cachePrices[r].market_hash_name;n.app_data.owned=cachePrices[r].owned;t===g_ActiveInventory.selectedItem&&reloadDes();return}cachePrices[r]={market_hash_name:(i?"Genuine ":"")+u};f=new RegExp(".*"+cachePrices[r].market_hash_name.replace("The ","(The )?")+"$");$J.each(g_ActiveInventory.rgInventory,function(){if(f.test(this.market_hash_name))return cachePrices[r].market_hash_name=this.market_hash_name,cachePrices[r].owned=!0,!1});$J.ajax({method:"GET",url:r,success:function(r){var o=0,s=0,e,f;if(r.success)if(r.median_price){if(cachePrices[this.url].lowestPrice=o=r.lowest_price,cachePrices[this.url].nofeePrice=s=r.median_price,t===g_ActiveInventory.selectedItem){for(e=0;e<t.descriptions.length;e++)if(f=t.descriptions[e],f.setLink==this.url){f.app_data.price=cachePrices[this.url].lowestPrice;f.app_data.market_hash_name=cachePrices[this.url].market_hash_name;f.app_data.owned=cachePrices[this.url].owned;break}reloadDes()}}else u.indexOf("The ")==0&&(n.market_hash_name=u.substring(4),getSetLink(n,t,i));else u.indexOf("The ")==0&&(n.market_hash_name=u.substring(4),getSetLink(n,t,i))},error:function(){u.indexOf("The ")==0&&(n.market_hash_name=u.substring(4),getSetLink(n,t,i))}})},getMediumPrice=function(n){n.market_hash_name||(n.market_hash_name=n.name);var t=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid="+n.appid+"&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name="+encodeURIComponent(n.market_hash_name);mediumName=n.market_hash_name;$J.ajax({method:"GET",url:t,success:function(n){n.success&&(mediumPrice=n.lowest_price)}})},getGiftPrice=function(n){var i=n.actions[0].link,t=/http:\/\/store.steampowered.com\/app\/(\d+)\//.exec(i)[1];$J(".dd_price").html("Loading...");$J.ajax({url:"//store.steampowered.com/api/appdetails?appids="+t,crossDomain:!0,success:function(n){if(n&&n[t]&&n[t].success){var i=n[t].data.price_overview,r="";r=i.discount_percent>0?i.final/100+" (-"+i.discount_percent+") "+i.currency:i.final/100+" "+i.currency;$J(".dd_price").html(r)}},error:function(){$J(".dd_price").html("Error")}})},getLowestPriceHandler=function(n,t){var r=n||g_ActiveInventory.selectedItem,v,y,c,i,f,u,s,l;if(r.appid!=753||!r.actions||!r.actions[0].link||!r.actions[0].link.startsWith("http://store.steampowered.com/app/")){r.market_hash_name||(r.market_hash_name=r.name);v=encodeURIComponent(name);y=g_ActiveInventory.appid;$J(".dd_price").html("Loading...");var h=!1,e=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid="+r.appid+"&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name="+encodeURIComponent(r.market_hash_name),o=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid="+r.appid+"&country="+g_strCountryCode+"&currency="+sellcurrencyId+"&market_hash_name="+encodeURIComponent(r.market_hash_name),a=window.location.protocol+"//steamcommunity.com/market/listings/"+r.appid+"/"+encodeURIComponent(r.market_hash_name);if(cachePrices[e]&&cachePrices[e].nofeePrice?(r.nofeePrice=cachePrices[e].nofeePrice,r.lowestPrice=cachePrices[e].lowestPrice):cachePrices[e]={market_hash_name:r.market_hash_name,owned:!0},cachePrices[o]&&cachePrices[o].nofeePrice?(r.nofeePriceW=cachePrices[o].nofeePrice,r.lowestPriceW=cachePrices[o].lowestPrice):cachePrices[o]={market_hash_name:r.market_hash_name,owned:!0},$J.each(r.tags,function(){return h=h||this.category=="Quality"&&this.internal_name=="genuine",h?!1:void 0}),r.type!=="Rare Inscribed Gem"&&r.appid==570)for(c=0;c<r.descriptions.length;c++)if(i=r.descriptions[c],i.type=="html"||!(i.value.indexOf("Inscribed Gem")<0)||!(i.value.indexOf("Kinetic Gem")<0)||!(i.value.indexOf("Prismatic Gem")<0)||!(i.value.indexOf("Ethereal Gem")<0)){for(!i.app_data||i.app_data.is_itemset_name||i.app_data.price||i.app_data.limited||getSetLink(i,r,h);f=insGemExp.exec(i.value);){if(u=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Inscribed "+f[1],s=f[0].replace('<span style="font-size: 12px">Inscribed Gem<\/span>','<a href="'+u+'">Inscribed Gem (Loading)<\/a>'),cachePrices[u]&&cachePrices[u].lowestPrice){i.value=i.value.replace('<span style="font-size: 12px">Inscribed Gem<\/span>','<a href="'+u+'" target="_blank" title="'+cachePrices[u].nofeePrice+'">Inscribed Gem ('+cachePrices[u].lowestPrice+")<\/a>");r===g_ActiveInventory.selectedItem&&reloadDes();continue}i.value=i.value.replace(f[0],s);$J.ajax({method:"GET",url:u,success:function(n){var t=0,u=0;n.success?(cachePrices[this.url]={},cachePrices[this.url].lowestPrice=t=n.lowest_price,cachePrices[this.url].nofeePrice=u=n.median_price,i.value=i.value.replace('<a href="'+this.url+'">Inscribed Gem (Loading)<\/a>','<a href="'+this.url+'" target="_blank" title="'+u+'">Inscribed Gem ('+t+")<\/a>"),r===g_ActiveInventory.selectedItem&&reloadDes()):i.value=i.value.replace('<a href="'+this.url+'">Inscribed Gem (Loading)<\/a>','<span style="font-size: 12px">Inscribed Gem<\/span>')},error:function(){i.value=i.value.replace('<a href="'+this.url+'">Inscribed Gem (Loading)<\/a>','<span style="font-size: 12px">Inscribed Gem<\/span>')}})}while(f=kinGemExp.exec(i.value))u=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Kinetic: "+f[1],s=f[0].replace('<span style="font-size: 12px">Kinetic Gem<\/span>','<a href="'+u+'">Kinetic Gem (Loading)<\/a>'),i.value=i.value.replace(f[0],s),$J.ajax({method:"GET",url:u,success:function(n){var t=0,u=0;n.success?(cachePrices[this.url]={},cachePrices[this.url].lowestPrice=t=n.lowest_price,cachePrices[this.url].nofeePrice=u=n.median_price,i.value=i.value.replace('<a href="'+this.url+'">Kinetic Gem (Loading)<\/a>','<a href="'+this.url+'" target="_blank" title="'+u+'">Kinetic Gem ('+t+")<\/a>"),r===g_ActiveInventory.selectedItem&&reloadDes()):i.value=i.value.replace('<a href="'+this.url+'">Kinetic Gem (Loading)<\/a>','<span style="font-size: 12px">Kinetic Gem<\/span>')},error:function(){i.value=i.value.replace('<a href="'+this.url+'">Kinetic Gem (Loading)<\/a>','<span style="font-size: 12px">Kinetic Gem<\/span>')}});while(f=masGemExp.exec(i.value))u=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Rune%20of%20the%20Duelist%20Indomitable",s=f[0].replace('<span style="font-size: 12px">Rune of the Duelist Indomitable<\/span>','<a href="'+u+'">Rune of the Duelist Indomitable (Loading)<\/a>'),i.value=i.value.replace(f[0],s),$J.ajax({method:"GET",url:u,success:function(n){var t=0,u=0;n.success?(cachePrices[this.url]={},cachePrices[this.url].lowestPrice=t=n.lowest_price,cachePrices[this.url].nofeePrice=u=n.median_price,i.value=i.value.replace('<a href="'+this.url+'">Rune of the Duelist Indomitable (Loading)<\/a>','<a href="'+this.url+'" target="_blank" title="'+u+'">Rune of the Duelist Indomitable ('+t+")<\/a>"),r===g_ActiveInventory.selectedItem&&reloadDes()):i.value=i.value.replace('<a href="'+this.url+'">Rune of the Duelist Indomitable (Loading)<\/a>','<span style="font-size: 12px">Rune of the Duelist Indomitable<\/span>')},error:function(){i.value=i.value.replace('<a href="'+this.url+'">Rune of the Duelist Indomitable (Loading)<\/a>','<span style="font-size: 12px">Rune of the Duelist Indomitable<\/span>')}});while(f=corGemExp.exec(i.value))u=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Foulfell Shard",s=f[0].replace('<span style="font-size: 12px">Foulfell Shard<\/span>','<a href="'+u+'">Foulfell Shard (Loading)<\/a>'),i.value=i.value.replace(f[0],s),$J.ajax({method:"GET",url:u,success:function(n){var t=0,u=0;n.success?(cachePrices[this.url]={},cachePrices[this.url].lowestPrice=t=n.lowest_price,cachePrices[this.url].nofeePrice=u=n.median_price,i.value=i.value.replace('<a href="'+this.url+'">Foulfell Shard (Loading)<\/a>','<a href="'+this.url+'" target="_blank" title="'+u+'">Foulfell Shard ('+t+")<\/a>"),r===g_ActiveInventory.selectedItem&&reloadDes()):i.value=i.value.replace('<a href="'+this.url+'">Foulfell Shard (Loading)<\/a>','<span style="font-size: 12px">Foulfell Shard<\/span>')},error:function(){i.value=i.value.replace('<a href="'+this.url+'">Foulfell Shard (Loading)<\/a>','<span style="font-size: 12px">Foulfell Shard<\/span>')}});while(f=ethGemExp.exec(i.value))u=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Ethereal: "+f[1],s=f[0].replace('<span style="font-size: 12px">Ethereal Gem<\/span>','<a href="'+u+'">Ethereal Gem (Loading)<\/a>'),i.value=i.value.replace(f[0],s),$J.ajax({method:"GET",url:u,success:function(n){var t=0,u=0;n.success?(cachePrices[this.url]={},cachePrices[this.url].lowestPrice=t=n.lowest_price,cachePrices[this.url].nofeePrice=u=n.median_price,i.value=i.value.replace('<a href="'+this.url+'">Ethereal Gem (Loading)<\/a>','<a href="'+this.url+'" target="_blank" title="'+u+'">Ethereal Gem ('+t+")<\/a>"),r===g_ActiveInventory.selectedItem&&reloadDes()):i.value=i.value.replace('<a href="'+this.url+'">Ethereal Gem (Loading)<\/a>','<span style="font-size: 12px">Ethereal Gem<\/span>')},error:function(){i.value=i.value.replace('<a href="'+this.url+'">Ethereal Gem (Loading)<\/a>','<span style="font-size: 12px">Ethereal Gem<\/span>')}});while(f=priGemExp.exec(i.value))u=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Prismatic: "+f[1],s=f[0].replace('<span style="font-size: 12px">Prismatic Gem<\/span>','<a href="'+u+'">Prismatic Gem (Loading)<\/a>'),i.value=i.value.replace(f[0],s),$J.ajax({method:"GET",url:u,success:function(n){var t=0,u=0;n.success?(cachePrices[this.url]={},cachePrices[this.url].lowestPrice=t=n.lowest_price,cachePrices[this.url].nofeePrice=u=n.median_price,i.value=i.value.replace('<a href="'+this.url+'">Prismatic Gem (Loading)<\/a>','<a href="'+this.url+'" target="_blank" title="'+u+'">Prismatic Gem ('+t+")<\/a>"),r===g_ActiveInventory.selectedItem&&reloadDes()):i.value=i.value.replace('<a href="'+this.url+'">Prismatic Gem (Loading)<\/a>','<span style="font-size: 12px">Prismatic Gem<\/span>')},error:function(){i.value=i.value.replace('<a href="'+this.url+'">Ethereal Gem (Loading)<\/a>','<span style="font-size: 12px">Ethereal Gem<\/span>')}})}if(!r.marketable){$J(".dd_price").html("Not Marketable");t&&o==e&&t(r);return}if(r.lowestPrice){if(l="<a href='#' target='_blank' title='"+r.nofeePrice+"'>"+r.lowestPrice+"<\/a>",mediumPrice&&r.market_hash_name!==mediumName){var p=parseFloat(getNumber(r.lowestPrice)),w=parseFloat(getNumber(mediumPrice)),b=(p/w).toFixed(2);l+=" ("+b+" "+mediumName+")"}if($J(".dd_price").html(l),$J(".dd_price").find("a").attr("href",a),t&&o==e){t(r);return}}else $J.ajax({method:"GET",url:e,success:function(n){var i;if(n.success){if(cachePrices[e].lowestPrice=r.lowestPrice=n.lowest_price,cachePrices[e].nofeePrice=r.nofeePrice=n.median_price,o==e&&(r.lowestPriceW=n.lowest_price,r.nofeePriceW=n.median_price),r===g_ActiveInventory.selectedItem){if(r.lowestPrice){if(i="<a href='#' target='_blank' title='"+r.nofeePrice+"'>"+r.lowestPrice+"<\/a>",mediumPrice&&r.market_hash_name!==mediumName){var u=parseFloat(getNumber(r.lowestPrice)),f=parseFloat(getNumber(mediumPrice)),s=(u/f).toFixed(2);i+=" ("+s+" "+mediumName+")"}$J(".dd_price").html(i)}else $J(".dd_price").html("<a href='#' target='_blank' title='Can not get price'>Can't get price<\/a>");$J(".dd_price").find("a").attr("href",a)}t&&o==e&&t(r)}}});r.lowestPriceW?t&&t(r):o!=e&&$J.ajax({method:"GET",url:o,success:function(n){n.success&&(cachePrices[o].lowestPrice=r.lowestPriceW=n.lowest_price,cachePrices[o].nofeePrice=r.nofeePriceW=n.median_price,t&&t(r))}})}},setGemPrice=function(n,t,i,r){var u=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country=VN&currency=1&market_hash_name="+t;$J.ajax({method:"GET",url:u,success:function(i){var u=0,f;i.success&&(u=i.lowest_price,f=/([\d\.,]+)/.exec(u.replace(/\&#\d+;/g,"").replace(" p&#1091;&#1073;.","").replace(/,/g,"."))[1],n.extimatePrice[t]=f,r(n))},error:function(){}})},imgRex=/<img.*?src="([^"]+?)"[^>]*>/g,imgRex2=/background-image: url\(([^\)]+?)\)/g,ShowQueue=function(n){var r;$J("div.queue-container").remove();var u=$J(".selectedSell"),t=$J('<div class="queue-container">'),i=$J('<div class="queue-right-panel">');t.append(i);i.append('<div class="queue-panel"><fieldset><div class="queue-item-count">'+u.length+'<\/div><div class="queue-total-price"><span class="with-fee" title="Total buyer will pay"><\/span><span class="without-fee" title="Total will recieve"><\/span><\/div><\/fieldset><\/div>');i.append('<div class="queue-remove-panel queue-panel"><fieldset><legend>'+SIHLang.queue.removeitem+'<\/legend><input type="text" class="num" id="txt_remove_queue" /><a href="#" id="bt_lower">'+SIHLang.queue.removelower+'<\/a><a href="#" id="bt_higher">'+SIHLang.queue.removehigher+"<\/a><\/fieldset><\/div>");i.append('<div class="queue-sort-panel queue-panel"><fieldset><legend>'+SIHLang.sort.sortitem+'<\/legend><a href="#" id="bt_sort_price">'+SIHLang.sort.price+' <span class="market_sort_arrow"><\/span><\/a><\/fieldset><\/div>');r=$J('<div class="scrollbar-inner">');t.append(r);u.each(function(){var n=this.rgItem,t=$J('<div class="queue-item-container" data-id="'+n.id+'">'),i,e,u,f;if(t.append('<a href="#" class="queue-item-remove" title="Remove from queue">&#x2212;<\/a>'),i="",n.fraudwarnings&&(i+='<img src="http://steamcommunity-a.akamaihd.net/public/images/sharedfiles/icons/icon_warning.png" height="16" />'),n.descriptions&&n.descriptions.length)for(e=null,u=0;u<n.descriptions.length;u++)while((e=imgRex.exec(n.descriptions[u].value))!=null||(e=imgRex2.exec(n.descriptions[u].value))!=null)i+='<img src="'+e[1]+'" height="16"/>';i.length>0&&t.append('<div class="item-bagde">'+i+"<\/div>");f=$J('<div class="queue-item">');f.css("border-color","#"+n.name_color);f.append($J(this).find("img").clone());t[0].rgItem=n;t.append(f);AddItemHoverToElement(f[0],n);r.append(t)});t.find("#bt_lower, #bt_higher").click(function(){var n=$J(this).attr("id")==="bt_lower"?-1:1,t=parseFloat($J("#txt_remove_queue").val());return isNaN(t)?!1:($J(".queue-item-container").each(function(){var i=this.rgItem,r;i&&i.lowestPriceW&&(r=parseFloat(getNumber(i.lowestPriceW)),r*n>t*n&&$J(this).find(".queue-item-remove").trigger("click"))}),!1)});t.find("#bt_sort_price").click(function(){var n,r,u,i;return isSorting?!1:(isSorting=!0,n=1,$this=$J(this),$this.find(".market_sort_arrow").is(':contains("▲")')?(n=-1,$this.find(".market_sort_arrow").text("▼")):$this.find(".market_sort_arrow").text("▲"),r=t.find("div:has(>.queue-item-container)"),u=r.children(".queue-item-container"),u.sort(function(t,i){var f=t.rgItem,e=i.rgItem,r,u;return f?e?(r=typeof f.lowestPriceW=="undefined"?0:parseFloat(getNumber(f.lowestPriceW)),u=typeof e.lowestPriceW=="undefined"?0:parseFloat(getNumber(e.lowestPriceW)),r==u&&(r=f.market_hash_name,u=e.market_hash_name),r>u)?1*n:r<u?-1*n:0:n*-1:n}),u.detach().appendTo(r),i=$J(".queue-item-container")[0].rgItem,g_ActiveInventory.SelectItem(null,i.element,i),g_ActiveInventory.EnsurePageActiveForItem(i.element),UpdateSellItem(i),isSorting=!1,!1)});$J("body").append(t);$J(r).scrollbar();qTotalPrice=0;qTotalBuyerPrice=0;n?GetQueueGoo():GetQueuePrice()},qTimer=null,qTotalPrice=0,qTotalBuyerPrice=0,isSorting=!1,GetQueuePrice=function(){var n,t;isSorting=!1;qTimer&&window.clearTimeout(qTimer);n=$J(".queue-item-container:not(:has(>span.price))");n.length>0&&(t=n[0].rgItem,getLowestPriceHandler(t,function(t){var h,c,e,o,r,u;if(t&&t.lowestPriceW){var l=getNumber(t.lowestPriceW),f=GetPriceValueAsInt(l),i=f,s=null;f>0&&i==parseInt(i)&&(h=typeof SellItemDialog.m_item.market_fee!="undefined"?SellItemDialog.m_item.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default,c=CalculateFeeAmount(i,h),i=i-c.fees,s=v_currencyformat(i,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));e=$J('<span class="price"><\/span>');e.html(t.lowestPriceW);e.attr("title",s);t.buyerPrice=f;t.sellerPrice=i;$J(n[0]).append(e);qTotalPrice+=f;qTotalBuyerPrice+=i;$J(".queue-total-price .with-fee").html(v_currencyformat(qTotalPrice,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));$J(".queue-total-price .without-fee").html(v_currencyformat(qTotalBuyerPrice,GetCurrencyCode(g_rgWalletInfo.wallet_currency)))}else{if(o=n[0].rgItem,$J("#item"+o.appid+"_"+o.contextid+"_"+$J(n[0]).data().id+".selectedSell").removeClass("selectedSell"),r=$J(".inventory_page .selectedSell").length,r<=0)return SellItemDialog.Dismiss(),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),!1;u=$J(".queue-item-container")[0].rgItem;g_ActiveInventory.SelectItem(null,u.element,u);g_ActiveInventory.EnsurePageActiveForItem(u.element);UpdateSellItem(u);$J(".queue-item-count").html(r);$J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(r>1?SIHLang.sellnitem.replace("$1",r):SIHLang.sell1item);$J(n[0]).remove()}window.setTimeout("GetQueuePrice();",50)}))},GetQueueGoo=function(){var t;if(isSorting=!1,qTimer&&window.clearTimeout(qTimer),t=$J(".queue-item-container:not(:has(>span.price))"),t.length>0){var n=t[0].rgItem,i={sessionid:g_sessionID,appid:n.app_data.appid,assetid:n.id,contextid:n.contextid},r=g_strProfileURL+"/ajaxgetgoovalue/";$J.get(r,i).done(function(i){var u=$J(i.strHTML),f=i.strTitle,r;n.goo_value=i.goo_value;r=$J('<span class="price"><\/span>');r.html(n.goo_value);r.attr("title",n.goo_value);$J(t[0]).append(r);qTotalPrice+=parseInt(n.goo_value);$J(".queue-total-price .with-fee").html(qTotalPrice);$J(".queue-total-price .without-fee").html("gems");window.setTimeout("GetQueueGoo();",50)})}},GrindNextItem=function(){var t,n,i;$J(".selectedSell").length==0?(GrindDialog.Dismiss(),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide()):$J(".selectedSell").length>0&&!GrindDialog.m_bIsDismissed?(t=$J(".selectedSell").length,$J(".queue-item-count").html(t),$J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(t>1?SIHLang.sellnitem.replace("$1",t):SIHLang.sell1item),n=$J(".queue-item-container:visible")[0].rgItem,g_ActiveInventory.SelectItem(null,n.element,n),g_ActiveInventory.EnsurePageActiveForItem(n.element),n.goo_value&&(i={sessionid:g_sessionID,appid:n.app_data.appid,assetid:n.id,contextid:n.contextid,goo_value_expected:n.goo_value},strActionURL=g_strProfileURL+"/ajaxgrindintogoo/",$J.post(strActionURL,i).done(function(){g_ActiveInventory.selectedItem.marketable=0;$J(g_ActiveInventory.selectedItem.element).removeClass("selectedSell");$J(g_ActiveInventory.selectedItem.element).css("opacity","0.3");$J("div.queue-item-container[data-id="+g_ActiveInventory.selectedItem.id+"]").hide(200,function(){setTimeout("GrindNextItem()",100)})}).fail(function(){ShowAlertDialog(strDialogTitle,"There was an error communicating with the network. Please try again later.")}))):GrindDialog.Dismiss()},ModifyMarketActions=function(){typeof fastdelta=="undefined"&&(window.fastdelta=-.01);typeof quicksellbuttons=="undefined"&&(window.quicksellbuttons=!0);typeof buysetbuttons=="undefined"&&(window.buysetbuttons=!0);PopulateMarketActions=function(n,t){var i,u,s;if(n.update(""),!t.marketable||t.is_currency&&CurrencyIsWalletFunds(t)){n.hide();return}if(typeof g_bViewingOwnProfile!="undefined"&&g_bViewingOwnProfile){var f=typeof t.market_hash_name!="undefined"?t.market_hash_name:t.market_name||t.name,r=new Element("div"),e=new Element("div",{style:"height: 24px;"}),o=new Element("a",{href:window.location.protocol+"//steamcommunity.com/market/listings/"+t.appid+"/"+encodeURIComponent(f)});o.update("View in Community Market");e.appendChild(o);r.appendChild(e);i=new Element("div",{style:"min-height: 3em; margin-left: 1em;"});i.update('<img src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/login/throbber.gif" alt="Working...">');r.appendChild(i);new Ajax.Request(window.location.protocol+"//steamcommunity.com/market/priceoverview/",{method:"get",parameters:{country:g_strCountryCode,currency:typeof g_rgWalletInfo!="undefined"?g_rgWalletInfo.wallet_currency:1,appid:t.appid,market_hash_name:f},onSuccess:function(r){var f,s,l,a,h,o;if(r.responseJSON&&r.responseJSON.success){if(f="",r.responseJSON.lowest_price){f+="Starting at: "+r.responseJSON.lowest_price+"<br>";var v=getNumber(r.responseJSON.lowest_price),e=GetPriceValueAsInt(v),u=e,c=null;e>0&&u==parseInt(u)&&(s=typeof t.market_fee!="undefined"?t.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default,l=CalculateFeeAmount(u,s),u=u-l.fees+100*window.fastdelta,u<=0&&(u=1),a=CalculateAmountToSendForDesiredReceivedAmount(u,s),e=a.amount,c=v_currencyformat(e,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));quicksellbuttons&&(h=CreateMarketActionButton("green","#",SIHLang.quicksell.replace("$1",c)),$J(h).click(function(){return i.update('<img src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/login/throbber.gif" alt="Working...">'),SellItemDialog.m_item=t,$J.ajax({url:"https://steamcommunity.com/market/sellitem/",type:"POST",data:{sessionid:g_sessionID,appid:t.appid,contextid:t.contextid,assetid:t.id,amount:1,price:u},crossDomain:!0,xhrFields:{withCredentials:!0}}).done(function(i){SellItemDialog.OnSuccess({responseJSON:i});$J("#Ck_NoReload").is(":checked")&&PopulateMarketActions(n,t)}).fail(function(n){i.update("Error...");var t=$J.parseJSON(n.responseText);SellItemDialog.OnFailure({responseJSON:t})}),!1}),n.appendChild(h))}else f+="There are no listings currently available for this item.<br>";r.responseJSON.volume&&(o="%1$s sold in the last 24 hours",o=o.replace("%1$s",r.responseJSON.volume),f+="Volume: "+o+"<br>");i.update(f)}},onFailure:function(){r.hide()}});n.appendChild(r);u=CreateMarketActionButton("green","#","Sell");$J(u).click(function(){if($J(".selectedSell").length>0){$J("#div_multi input[type=checkbox]").prop("disabled",!1);$J("#div_multi").show();$J("#ck_autoaccept").prop("checked",!0);var n=$J(".selectedSell")[0].rgItem;g_ActiveInventory.SelectItem(null,n.element,n);g_ActiveInventory.EnsurePageActiveForItem(n.element);SellItemDialog.Show(n);ShowQueue()}else SellCurrentSelection();return!1});n.appendChild(u);g_bMarketAllowed||(s=$("market_tip_noaccess"),InstallHoverTooltip(u,s))}else{n.hide();return}n.show()}},ModifyDescriptionFunction=function(){PopulateDescriptions=function(n,t){var o,i,u,y,r,f,c,l,a;if(n.update(""),!t||!t.length){n.hide();return}n.show();var e=null,v=null,s=0,h=[];for(o=0;o<t.length;o++)(i=t[o],i.value)&&(u=new Element("div",{"class":"descriptor"}),i.color&&(u.style.color="#"+i.color),v_trim(i.value).length==0?u.update("&nbsp;"):i.type=="image"?(y=new Element("img",{src:i.value}),u.appendChild(y)):(i.value=i.value.replace(/\[date\](\d*)\[\/date\]/g,function(n,t){var i=new Date(t*1e3);return i.toLocaleString()}),r=i.value.replace(/\n/g,"<br>"),!i.app_data||i.app_data.limited||i.app_data.is_itemset_name||(f={},i.app_data.price&&(c=getNumber(i.app_data.price),f.price=c,f.link=window.location.protocol+"//steamcommunity.com/market/listings/"+g_ActiveInventory.appid+"/"+encodeURIComponent(i.app_data.market_hash_name),f.name=r,f.market_hash_name=i.app_data.market_hash_name,s+=parseFloat(c),r='<a href="'+window.location.protocol+"//steamcommunity.com/market/listings/"+g_ActiveInventory.appid+"/"+encodeURIComponent(i.app_data.market_hash_name)+'" target="_blank" style="color:inherit" class="whiteLink">'+r+" ("+i.app_data.price+")<\/a>"),i.app_data.owned?r="&#10003; "+r:(r="&#10007;&nbsp; "+r,i.app_data.price&&h.push(f))),u.update(r)),i.app_data&&i.app_data.is_itemset_name&&(e=u,v=i.value),i.label&&(l=new Element("span",{"class":"descriptor_label"}),l.update(i.label+": "),u.insert({top:l})),n.appendChild(u));e&&s>0&&(e.update(v+" ("+formatNumber(s)+")"),h.length>0&&g_bViewingOwnProfile&&g_bMarketAllowed&&buysetbuttons&&!n.id.startsWith("hover")&&(a=$J('<a href="#" class="buy-set">'+SIHLang.buymissing+"<\/a>"),a.click(function(){return BuySetDialog.Show(h),!1}),$J(e).append("<br />").append(a)))};var n=PopulateTags;PopulateTags=function(t,i,r){if(n(t,i,r),r&&r.length>0){var u=$J('<a href="javascript:void(0)">Gen. expression<\/a>');u.click(function(){GenExpDialog.Show(r)});$J(i).append("<br />").append(u)}}},ModifyItemDisplay=function(){UserYou.OnLoadInventoryComplete=function(n,t,i){var r,e,u,f;if(this.cLoadsInFlight--,n.responseJSON&&n.responseJSON.success)r=new CInventory(this,t,i,n.responseJSON.rgInventory,n.responseJSON.rgCurrency),this.addInventory(r),e=r.getInventoryElement(),e.hide(),$("inventories").insert(e),u=r.getTagContainer(),f=$("filter_options"),f&&u&&(u.hide(),f.insert(u),f.addClassName("filter_collapsed")),t==570&&$J.ajax({url:window.location.protocol+"//api.steampowered.com/IEconItems_570/GetPlayerItems/v0001/",data:{SteamID:this.strSteamId,key:"7A7F40B1E5754373A1A75C8A00B911DC"},success:function(n){n&&n.result&&n.result.status==1&&(apiItems[this.strSteamId]=n.result.items,$J.each(apiItems[this.strSteamId],function(n,t){if(t.equipped){var i=$J("div.item[id=item570_2_"+t.id+"]");i.addClass("item-equipped");i.each(function(){this.rgItem.equipped=!0})}}))},error:function(){}});else{this.OnInventoryLoadFailed(n,t,i);return}this.ShowInventoryIfActive(t,i);g_bIsTrading&&RedrawCurrentTradeStatus()}},UpdateSellItem=function(n){var t,u,f,r,e,i;if(SellItemDialog.m_item=n,$J("#ck_autoadjust").is(":checked")){if(!n.sellerPrice)return!1;t=n.sellerPrice+Math.floor(parseFloat($J("#Txt_adjust").val())*100);t<=0&&(t=n.sellerPrice);u=typeof SellItemDialog.m_item.market_fee!="undefined"?SellItemDialog.m_item.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default;f=CalculateAmountToSendForDesiredReceivedAmount(t,u);$J("#market_sell_currency_input").val(v_currencyformat(t,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));$J("#market_sell_buyercurrency_input").val(v_currencyformat(f.amount,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));SellItemDialog.m_nConfirmedPrice=t}return r=$("market_sell_dialog_item"),n.name_color&&(r.style.borderColor="#"+n.name_color),n.background_color&&(r.style.backgroundColor="#"+n.background_color),e=$("market_sell_dialog_item_img"),e.src=n.is_stackable?ImageURL(n.icon_url,"96f","58f"):ImageURL(n.icon_url,"96f","96f"),SellItemDialog.m_strName=GetNameForItem(n),$("market_sell_dialog_item_name").update(SellItemDialog.m_strName),$("market_sell_quantity_available_amt").update(n.amount),$("market_sell_dialog_item_name").style.color=n.name_color?"#"+n.name_color:"",n.appid&&g_rgAppContextData[n.appid]?(i=g_rgAppContextData[n.appid],$("market_sell_dialog_game_icon").src=i.icon,$("market_sell_dialog_game_icon").alt=i.name,$("market_sell_dialog_game_name").update(i.name),$("market_sell_dialog_item_type").update(n.type),$("market_sell_dialog_game_info").show()):$("market_sell_dialog_game_info").hide(),n.amount==1?($("market_sell_quantity_input").disable(),$("market_sell_quantity_label").hide(),$("market_sell_quantity_input").hide(),$("market_sell_quantity_available").hide()):($("market_sell_quantity_label").show(),$("market_sell_quantity_input").show(),$("market_sell_quantity_available").show()),!0},ModifySellingFuntions=function(){SellItemDialog.orgOnSuccess=SellItemDialog.OnSuccess;SellItemDialog.orgOnFailure=SellItemDialog.OnFailure;SellItemDialog.newOnSuccess=function(n){this.m_bWaitingForUserToConfirm=!1;this.m_bWaitingOnServer=!1;n.responseJSON?($("market_headertip_itemsold_itemname").update(this.m_strName),$("market_headertip_itemsold_itemname").style.color=this.m_item.name_color?"#"+this.m_item.name_color:"",g_ActiveInventory.selectedItem.marketable=0,$J(g_ActiveInventory.selectedItem.element).removeClass("selectedSell"),$J(g_ActiveInventory.selectedItem.element).css("opacity","0.3"),$J("div.queue-item-container[data-id="+g_ActiveInventory.selectedItem.id+"]").hide(200,function(){var t,n;if($J(".selectedSell").length>0){if(t=$J(".selectedSell").length,$J(".queue-item-count").html(t),$J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(t>1?SIHLang.sellnitem.replace("$1",t):SIHLang.sell1item),n=$J(".queue-item-container:visible")[0].rgItem,g_ActiveInventory.SelectItem(null,n.element,n),g_ActiveInventory.EnsurePageActiveForItem(n.element),!UpdateSellItem(n))return;$J("#ck_autoaccept").is(":checked")?$J("#market_sell_dialog").is(":visible")&&window.setTimeout("SellItemDialog.OnConfirmationAccept({stop:function(){}});",200):($("market_sell_dialog_ok").show(),$("market_sell_dialog_ok").setOpacity("0"),$("market_sell_dialog_ok").fade({duration:.25,from:0,to:1}),$("market_sell_dialog_back").show(),$("market_sell_dialog_back").setOpacity("0"),$("market_sell_dialog_back").fade({duration:.25,from:0,to:1}),$("market_sell_dialog_throbber").fade({duration:.25}))}}),$J(".selectedSell").length<=0&&(SellItemDialog.Dismiss(),$J(".item.selectedSell").removeClass("selectedSell"),$J(".similar-item").removeClass("similar-item"),$J("#Lnk_Sellmulti .item_market_action_button_contents").html(SIHLang.sellmulti),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),selectmode=!1,SellItemDialog.OnFailure=SellItemDialog.orgOnFailure,$J(".item_market_actions").html(""))):this.DisplayError("There was a problem listing your item. Refresh the page and try again.")};SellItemDialog.Dismiss=function(){$(document).stopObserving("keydown",this.m_fnDocumentKeyHandler);$J("div.queue-container").remove();$J("#div_multi").hide();$J("#ck_autoaccept,#ck_autoadjust").prop("checked",!1);$J("#Txt_adjust").prop("disabled",!1);hideModal("market_sell_dialog");HideHover()};SellItemDialog.newOnFailure=function(n){this.m_bWaitingOnServer=!1;var t=Effect.Queues.get("global");t.each(function(n){n.cancel()});$("market_sell_dialog_ok").show();$("market_sell_dialog_ok").setOpacity("0");$("market_sell_dialog_ok").fade({duration:.25,from:0,to:1});$("market_sell_dialog_back").show();$("market_sell_dialog_back").setOpacity("0");$("market_sell_dialog_back").fade({duration:.25,from:0,to:1});$("market_sell_dialog_throbber").fade({duration:.25});n.responseJSON&&n.responseJSON.message?(this.DisplayError(n.responseJSON.message),n.responseJSON.message!="The item specified is no longer in your inventory or is not allowed to be traded on the Community Market."?$J("#ck_autoaccept").is(":checked")&&window.setTimeout("SellItemDialog.OnConfirmationAccept({stop:function(){}});",200):($J(g_ActiveInventory.selectedItem.element).removeClass("selectedSell"),$J(g_ActiveInventory.selectedItem.element).css("opacity","0.3"))):this.DisplayError("There was a problem listing your item. Refresh the page and try again.")};$J("#filter_options").after('<div><label for="Ck_NoReload" style="margin-left: 12px"><input type="checkbox" name="Ck_NoReload" checked="checked" id="Ck_NoReload" /><span data-lang="noreload">No inventory reloading when sell item<\/span><\/label><a href="#" id="Lnk_Reload" accesskey="r" style="margin-left: 12px" class="item_market_action_button item_market_action_button_green"><span class="item_market_action_button_edge item_market_action_button_left"><\/span><span class="item_market_action_button_contents" data-lang="reloadinvent">Reload inventory (alt + r)<\/span><span class="item_market_action_button_edge item_market_action_button_right"><\/span><span class="item_market_action_button_preload"><\/span><\/a><a href="#" id="Lnk_Sellmulti" class="item_market_action_button item_market_action_button_green" title="Tips: User shift click to select a range of items"><span class="item_market_action_button_edge item_market_action_button_left"><\/span><span class="item_market_action_button_contents" data-lang="sellmulti">Sell multi items<\/span><span class="item_market_action_button_edge item_market_action_button_right"><\/span><span class="item_market_action_button_preload"><\/span><\/a><a href="#" id="Lnk_ShowSellMulti" style="display:none" title="Tips: User shift click to select a range of items" class="item_market_action_button item_market_action_button_green"><span class="item_market_action_button_edge item_market_action_button_left"><\/span><span class="item_market_action_button_contents">Sell<\/span><span class="item_market_action_button_edge item_market_action_button_right"><\/span><span class="item_market_action_button_preload"><\/span><\/a><a href="#" id="Lnk_TurnIntoGems" style="display:none" class="item_market_action_button item_market_action_button_green"><span class="item_market_action_button_edge item_market_action_button_left"><\/span><span class="item_market_action_button_contents">Turn into gems<\/span><span class="item_market_action_button_edge item_market_action_button_right"><\/span><span class="item_market_action_button_preload"><\/span><\/a> <br /><\/div>');$J("#market_sell_dialog_accept_ssa_label").after('<div id="div_multi" style="display:none"><label for="ck_autoaccept"><input type="checkbox" id="ck_autoaccept"> <span data-lang="autoaccept">auto accept<\/span><\/label> <label for="ck_autoadjust"><input type="checkbox" id="ck_autoadjust"> <span data-lang="autoadjust">auto adjust price<\/span><\/label><input type="number" step="0.01" title="adjust amount" id="Txt_adjust" value="0" /><\/div>');$J("#market_sell_dialog_accept").click(function(){$J("#div_multi input[type=checkbox],#Txt_adjust").prop("disabled",!0)});SellItemDialog.OnSuccess=SellItemDialog.newOnSuccess;$J("#Ck_NoReload").click(function(){SellItemDialog.OnSuccess=$J(this).is(":checked")?SellItemDialog.newOnSuccess:SellItemDialog.orgOnSuccess});$J("#ck_autoadjust").click(function(){var t=g_ActiveInventory.selectedItem,n=t.sellerPrice+Math.floor(parseFloat($J("#Txt_adjust").val())*100),i,r;n<=0&&(n=t.sellerPrice);i=typeof SellItemDialog.m_item.market_fee!="undefined"?SellItemDialog.m_item.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default;r=CalculateAmountToSendForDesiredReceivedAmount(n,i);$J("#market_sell_currency_input").val(v_currencyformat(n,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));$J("#market_sell_buyercurrency_input").val(v_currencyformat(r.amount,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));$J(this).is(":checked")?$J("#market_sell_currency_input,#market_sell_buyercurrency_input").prop("disabled",!0):$J("#market_sell_currency_input,#market_sell_buyercurrency_input").prop("disabled",!1)});$J("#Lnk_Reload").click(function(){var n=g_ActiveInventory.selectedItem;return UserYou.ReloadInventory(n.appid,n.contextid),cachePrices={},selectmode=!1,$J("#Lnk_Sellmulti .item_market_action_button_contents").html(SIHLang.sellmulti),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),SellItemDialog.OnFailure=SellItemDialog.orgOnFailure,$J(".item.selectedSell").removeClass("selectedSell"),$J(".similar-item").removeClass("similar-item"),!1});$J("#Lnk_Sellmulti").click(function(){return selectmode=!selectmode,selectmode?($J("#Lnk_Sellmulti .item_market_action_button_contents").html(SIHLang.cancel),$J("#Ck_NoReload").prop("checked",!0),SellItemDialog.OnSuccess=SellItemDialog.newOnSuccess,SellItemDialog.OnFailure=SellItemDialog.newOnFailure):($J("#Lnk_Sellmulti .item_market_action_button_contents").html(SIHLang.sellmulti),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),SellItemDialog.OnFailure=SellItemDialog.orgOnFailure),$J(".item.selectedSell").removeClass("selectedSell"),$J(".similar-item").removeClass("similar-item"),!1});$J("#Lnk_ShowSellMulti").click(function(){if($J(".selectedSell").length>0){$J("#div_multi input[type=checkbox]").prop("disabled",!1);$J("#div_multi").show();$J("#ck_autoaccept").prop("checked",!0);var n=$J(".selectedSell")[0].rgItem;g_ActiveInventory.SelectItem(null,n.element,n);g_ActiveInventory.EnsurePageActiveForItem(n.element);SellItemDialog.m_bWaitingOnServer=!1;SellItemDialog.Show(n);ShowQueue()}return!1});$J("#Lnk_TurnIntoGems").click(function(){if($J(".selectedSell").length>0){var n=$J(".selectedSell")[0].rgItem,t={sessionid:g_sessionID,appid:n.app_data.appid,assetid:n.id,contextid:n.contextid},i=g_strProfileURL+"/ajaxgetgoovalue/";ShowQueue(!0);GrindDialog.Show()}return!1});$J("body").on("click",".queue-item-remove",function(){var i=$J(this).parent(".queue-item-container"),r=i[0].rgItem,n,t;return($J("#item"+r.appid+"_"+r.contextid+"_"+i.data().id+".selectedSell").removeClass("selectedSell"),i.hide(200),n=$J(".selectedSell").length,n<=0)?(SellItemDialog.Dismiss(),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),!1):(t=$J(".selectedSell")[0].rgItem,g_ActiveInventory.SelectItem(null,t.element,t),g_ActiveInventory.EnsurePageActiveForItem(t.element),UpdateSellItem(t),$J(".queue-item-count").html(n),$J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(n>1?SIHLang.sellnitem.replace("$1",n):SIHLang.sell1item),!1)})},AddDialogHTML=function(){var n='<div id="market_buyset_dialog" class="market_modal_dialog" style="display: none;"><div class="market_dialog_title"><span id="market_buyset_dialog_title" >Buy missing parts<\/span><span class="market_dialog_cancel"><a id="market_buyset_dialog_cancel" href="#" class="market_dialog_title_cancel">Cancel<span class="market_dialog_title_cancel_X">X<\/span><\/a><\/span><\/div><div class="market_dialog_contents"><div class="market_dialog_content_frame"><div class="market_dialog_content"><div class="market_dialog_iteminfo"><div id="lstParts" class="market_content_block market_home_listing_table market_home_main_listing_table market_listing_table"><\/div><\/div><\/div><div class="market_dialog_content_separator"><\/div><div class="market_dialog_content market_dialog_content_dark"><div class="market_sell_dialog_input_area"><a id="market_buyset_dialog_reload" href="#" class="btn_green_white_innerfade btn_small_wide"><span>Reload list<\/span><\/a><div>&nbsp;<br /><br /><\/div><\/div><\/div><\/div><\/div><\/div>';n+='<div id="hover" style="display: none; z-index: 1000"><div class="shadow_ul"><\/div><div class="shadow_top"><\/div><div class="shadow_ur"><\/div><div class="shadow_left"><\/div><div class="shadow_right"><\/div><div class="shadow_bl"><\/div><div class="shadow_bottom"><\/div><div class="shadow_br"><\/div>\t\t<div class="inventory_iteminfo hover_box shadow_content" id="iteminfo_clienthover"><div class="item_desc_content" id="hover_content"><div class="item_desc_icon"><div class="item_desc_icon_center"><img id="hover_item_icon" src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/trans.gif" alt="" /><\/div><\/div><div class="item_desc_description"><h1 class="hover_item_name" id="hover_item_name"><\/h1><div class="fraud_warning" id="hover_fraud_warnings"><\/div><div class="item_desc_game_info" id="hover_game_info"><div class="item_desc_game_icon"><img id="hover_game_icon" src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/trans.gif" alt="" /><\/div><div id="hover_game_name" class="ellipsis"><\/div><div id="hover_item_type" class=""><\/div><\/div><div class="item_desc_descriptors" id="hover_item_descriptors"><\/div><div class="item_desc_descriptors" id="hover_item_owner_descriptors"><\/div><\/div><\/div><\/div><div class="hover_arrow_left" id="hover_arrow_left"><div class="hover_arrow_inner"><\/div><\/div><div class="hover_arrow_right" id="hover_arrow_right"><div class="hover_arrow_inner"><\/div><\/div><\/div>';n+='<div id="market_getexp_dialog" class="market_modal_dialog" style="display: none;"><div class="market_dialog_title"><span id="market_getexp_dialog_title" >Generate custom button expression<\/span><span class="market_dialog_cancel"><a id="market_getexp_dialog_cancel" href="#" class="market_dialog_title_cancel">Cancel<span class="market_dialog_title_cancel_X">X<\/span><\/a><\/span><\/div><div class="market_dialog_contents"><div class="market_dialog_content_frame"><div class="market_dialog_content"><div><div class="tags-container"><\/div><div class="tag-textbox"><input type="text" style="width:100%" id="market_getexp_dialog_exptext" /><\/div><\/div><\/div><div class="market_dialog_content_separator"><\/div><div class="market_dialog_content market_dialog_content_dark"><div class="market_sell_dialog_input_area"><a id="market_getexp_dialog_gen" href="#" class="btn_green_white_innerfade btn_small_wide"><span>Generate<\/span><\/a><div>&nbsp;<br /><br /><\/div><\/div><\/div><\/div><\/div><\/div>';n+='<div id="market_grind_dialog" class="market_modal_dialog" style="display: none;"><div class="market_dialog_title"><span id="market_grind_dialog_title" >Turn into gems<\/span><span class="market_dialog_cancel"><a id="market_grind_dialog_cancel" href="#" class="market_dialog_title_cancel">Cancel<span class="market_dialog_title_cancel_X">X<\/span><\/a><\/span><\/div><div class="market_dialog_contents"><div class="market_dialog_content_frame"><div class="market_dialog_content"><div><div class="tags-container">Did you want to convert these items into Gems? It cannot be undone.<\/div><\/div><\/div><div class="market_dialog_content_separator"><\/div><div class="market_dialog_content market_dialog_content_dark"><div class="market_sell_dialog_input_area"><a id="market_grind_dialog_grind" href="#" class="btn_green_white_innerfade btn_small_wide"><span>Ok<\/span><\/a><div>&nbsp;<br /><br /><\/div><\/div><\/div><\/div><\/div><\/div>';$J("body").append(n)};BuySetDialog={m_bInitialized:!1,m_oItemsToBuy:[],m_fnDocumentKeyHandler:null,Initialize:function(){$("market_buyset_dialog_cancel").observe("click",this.OnCancel.bindAsEventListener(this));$("market_buyset_dialog_reload").observe("click",this.OnReload.bindAsEventListener(this));$("market_buyset_dialog").style.visibility="hidden";$("market_buyset_dialog").show();$("market_buyset_dialog").hide();$("market_buyset_dialog").style.visibility="";this.m_bInitialized=!0},Show:function(n){(this.m_bInitialized||this.Initialize(),n.length!=0)&&(m_oItemsToBuy=n,this.m_fnDocumentKeyHandler=this.OnDocumentKeyPress.bindAsEventListener(this),$(document).observe("keydown",this.m_fnDocumentKeyHandler),showModal("market_buyset_dialog",!0),this.OnReload({stop:function(){}}))},OnCancel:function(n){this.Dismiss();n.stop()},Dismiss:function(){$(document).stopObserving("keydown",this.m_fnDocumentKeyHandler);hideModal("market_buyset_dialog")},OnAccept:function(n){n.stop()},OnReload:function(n){var t,i;for(n.stop(),$J("#lstParts").html('<img src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/login/throbber.gif" class="loading" alt="Working...">'),t=0;t<m_oItemsToBuy.length;t++)i=m_oItemsToBuy[t],$J.get(i.link+"/render/?query=&start=0&count=1&country="+g_rgWalletInfo.wallet_country+"&language="+g_strLanguage+"&currency="+g_rgWalletInfo.wallet_currency,function(n){if($J("#lstParts").find("img.loading").remove(),n.success){var t=$J(n.results_html);$J("#lstParts").append(t);$J("#lstParts").find(".market_listing_table_header").remove();t.find("a.item_market_action_button.item_market_action_button_green").each(function(){var i=$J(this).parents(".market_listing_row"),t=buyingExp.exec($J(this).attr("href"));t&&($J(this).attr("href","#"),$J(this).find(".item_market_action_button_contents").html(SIHLang.quickbuy),AddItemHoverToElement(this,n.assets[t[2]][t[3]][t[4]]),$J(this).click(function(){$J(this).hide();var u={listingid:t[1],appid:t[2],contextid:t[3],id:t[4]},r=n.listinginfo[u.listingid],f={sessionid:g_sessionID,currency:g_rgWalletInfo.wallet_currency,subtotal:r.converted_price,fee:r.converted_fee,total:r.converted_price+r.converted_fee,quantity:1};return i.find(".market_listing_buy_button").append('<img src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/login/throbber.gif" alt="Working...">'),$J.ajax({url:"https://steamcommunity.com/market/buylisting/"+u.listingid,type:"POST",data:f,crossDomain:!0,xhrFields:{withCredentials:!0}}).done(function(){i.is(":visible")?i.find(".market_listing_buy_button").html("Success"):alert("Success")}).fail(function(n){i.find(".market_listing_buy_button img").remove();var t=$J.parseJSON(n.responseText);t&&t.message&&alert(t.message)}),!1}))})}})},OnDocumentKeyPress:function(n){n.keyCode==Event.KEY_ESC&&(this.Dismiss(),n.stop())}};GrindDialog={m_bInitialized:!1,m_bIsDismissed:!0,m_fnDocumentKeyHandler:null,Initialize:function(){$("market_grind_dialog_cancel").observe("click",this.OnCancel.bindAsEventListener(this));$("market_grind_dialog_grind").observe("click",this.OnGrind.bindAsEventListener(this));$("market_grind_dialog").style.visibility="hidden";$("market_grind_dialog").show();$("market_grind_dialog").hide();$("market_grind_dialog").style.visibility="";this.m_bInitialized=!0},Show:function(){this.m_bInitialized||this.Initialize();this.m_bIsDismissed=!1;this.m_fnDocumentKeyHandler=this.OnDocumentKeyPress.bindAsEventListener(this);$(document).observe("keydown",this.m_fnDocumentKeyHandler);showModal("market_grind_dialog",!0)},OnCancel:function(n){this.Dismiss();n.stop()},Dismiss:function(){$(document).stopObserving("keydown",this.m_fnDocumentKeyHandler);hideModal("market_grind_dialog");this.m_bIsDismissed=!0;$J("div.queue-container").remove()},OnAccept:function(n){n.stop()},OnGrind:function(n){n.stop();GrindNextItem()},OnDocumentKeyPress:function(n){n.keyCode==Event.KEY_ESC&&(this.Dismiss(),n.stop())}};GenExpDialog={m_bInitialized:!1,m_oItem:null,m_fnDocumentKeyHandler:null,Initialize:function(){$("market_getexp_dialog_cancel").observe("click",this.OnCancel.bindAsEventListener(this));$("market_getexp_dialog_gen").observe("click",this.OnGenerate.bindAsEventListener(this));$("market_getexp_dialog").style.visibility="hidden";$("market_getexp_dialog").show();$("market_getexp_dialog").hide();$("market_getexp_dialog").style.visibility="";$J("#market_getexp_dialog_exptext").click(function(){$J(this).select()});this.m_bInitialized=!0},Show:function(n){(this.m_bInitialized||this.Initialize(),n)&&(this.m_oItem=n,this.m_fnDocumentKeyHandler=this.OnDocumentKeyPress.bindAsEventListener(this),$(document).observe("keydown",this.m_fnDocumentKeyHandler),this.CreateList(),showModal("market_getexp_dialog",!0))},CreateList:function(){var i=$J("#market_getexp_dialog .tags-container"),t,n,r;for(i.empty(),t=0;t<this.m_oItem.length;t++)n=this.m_oItem[t],r=$J('<input type="checkbox" checked="checked" id="ck_tag_'+n.internal_name+'"/>'),r.data("exp",n),i.append(r),i.append(" "+n.category_name+": "+n.name+"<br />");this.OnGenerate({stop:function(){}})},OnCancel:function(n){this.Dismiss();n.stop()},Dismiss:function(){$(document).stopObserving("keydown",this.m_fnDocumentKeyHandler);hideModal("market_getexp_dialog")},OnGenerate:function(n){n.stop();var r=$J("#market_getexp_dialog .tags-container"),t="",i=[];r.find("input[type=checkbox]").each(function(){if($J(this).prop("checked")){var n=$J(this).data("exp");if(i.indexOf(n.category)>=0)return;t+=',"'+n.category+'":"'+n.internal_name+'"';i.push(n.category)}});t.length>0&&(t="{"+t.substring(1)+"}");$J("#market_getexp_dialog_exptext").val(t);$J("#market_getexp_dialog_exptext").select()},OnDocumentKeyPress:function(n){n.keyCode==Event.KEY_ESC&&(this.Dismiss(),n.stop())}};setTimeout(function(){var i,n,t;if(!($J.inArray(g_steamID,someIds)>-1)){sellcurrencyId=typeof g_rgWalletInfo!="undefined"?g_rgWalletInfo.wallet_currency:1;currencyId=typeof currency!="undefined"&&window.currency!=""?window.currency:sellcurrencyId;i=function(n){n=n.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var t=location.search.match(new RegExp("[?&]"+n+"=([^&]+)(&|$)"));return t&&decodeURIComponent(t[1].replace(/\+/g," "))};$J(".inventory_page_right .hover_item_name").after('<h2 class="dd_price"><\/h2>');window.usevector&&($J(".inventory_page_right .hover_item_name").after('<a href="javascript:void(0)" id="lnk_Medium">use this as vector<\/a>'),n=GetCookie("mediumname"),t=GetCookie("mediumappid"),$J("#lnk_Medium").click(function(){return SetCookie("mediumname",g_ActiveInventory.selectedItem.market_hash_name,3650,"/"),SetCookie("mediumappid",g_ActiveInventory.selectedItem.appid,3650,"/"),getMediumPrice(g_ActiveInventory.selectedItem),!1}),n&&t&&getMediumPrice({market_hash_name:n,appid:t}));$J("body").on("click",".item",function(n){var s,l,t,f,o;if(getLowestPriceHandler(),$J(".equiped").remove(),g_ActiveInventory.selectedItem.equipped&&$J(".hover_item_name:visible").after('<div class="equiped">Equipped<\/div>'),selectmode){if(this.rgItem&&this.rgItem.marketable){if($J(this).toggleClass("selectedSell"),$J(".similar-item").removeClass("similar-item"),s=this.rgItem.market_hash_name,$J(this).hasClass("selectedSell")&&$J(".inventory_ctn:visible .inventory_page .item").each(function(){this.rgItem.market_hash_name==s&&this.rgItem.marketable&&$J(this).addClass("similar-item")}),n.shiftKey&&lastSelectedItem){var h=$J(lastSelectedItem).parent(".itemHolder"),c=h.parent(".inventory_page"),i=h.index(),r=$J(this).parent(".itemHolder").index(),e=c.index(),u=$J(this).parents(".inventory_page").index();for((e==u&&i>r||u<e)&&(l=i,i=r,r=l),t=e;t<=u;t++)f=".inventory_ctn:visible .inventory_page:eq("+t+") .itemHolder",t==e?(f+=":gt("+i+")",t==u&&(f+=":lt("+(r-i)+")")):t==u&&(f+=":lt("+r+")"),$J(f+'[style!="display: none;"] .item').each(function(){this.rgItem&&this.rgItem.marketable&&$J(this).addClass("selectedSell")});c.is(":visible")}o=$J(".selectedSell").length;o>0?($J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(o>1?SIHLang.sellnitem.replace("$1",o):SIHLang.sell1item),$J("#Lnk_ShowSellMulti").show(),g_ActiveInventory.appid==753&&$J("#Lnk_TurnIntoGems").show()):($J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide());lastSelectedItem=this}return!1}});g_bViewingOwnProfile&&(ModifySellingFuntions(),ModifyMarketActions());ModifyDescriptionFunction();AddDialogHTML();ModifyItemDisplay();ReloadLang()}},10);
/*
//# sourceMappingURL=inventprice.script.min.js.map
*/