'use strict';var d;var f={LAUNCH_SOURCE:"Webstore",INIT_APP_HEIGHT:600,INIT_APP_WIDTH:676,MENU_OPTION_ABOUT_APP:!0,MENU_OPTION_TO_RERUN_TESTS:!0,MENU_OPTION_TO_SEND_CHROME_FEEDBACK:!0,MENU_OPTION_TO_SHOW_PASSING_TESTS:!0,RUN_TEST_CAPTIVE_PORTAL_HTTP:!0,RUN_TEST_CHROME_INTERNET_DISCONNECTED:!0,RUN_TEST_CHROMEOS_INTERNET_DISCONNECTED:!0,RUN_TEST_CHROMEOS_SIGNAL_STRENGTH:!0,RUN_TEST_DNS_POISONING:!0,RUN_TEST_END_TO_END:!0,RUN_TEST_HANGOUTS_BLOCKED:!0,RUN_TEST_HTTP_FIREWALL:!0,RUN_TEST_HTTP_LATENCY:!0,RUN_TEST_HTTPS_FIREWALL:!0,
RUN_TEST_PING_GATEWAY:!0,RUN_TEST_RESOLVER_LATENCY:!0,RUN_TEST_RESOLVER_PRESENT:!0,RUN_TEST_WIFI_ENCRYPTION:!1,OPTION_COPY_TEST_RESULTS:!0,OPTION_DEFAULT_SHOW_ALL_RESULTS:!0,OPTION_DEFAULT_SHOW_MORE_INFO:!1,OPTION_LOG_SUPPORT_DETAILS:!0,OPTION_LOG_TEST_BENCHMARKS:!0,OPTION_OUTPUT_LOGS_IN_CONSOLE:!0,OPTION_RECORD_HISTOGRAM_DATA:!0,OPTION_SHOW_TEST_LOGS:!0};var aa=function(){},g=null,h=function(){g||(g=new aa);return g};aa.prototype.log=function(a){console.log(a)};var ba=function(){},ca=function(a,b){for(var c=new ArrayBuffer(a.length),e=new Uint8Array(c),l=0,E=a.length;l<E;l++)e[l]=a.charCodeAt(l);b(c)};var da=function(){var a=new Uint8Array(new ArrayBuffer(20));a[0]=0;a[1]=1;a[2]=0;a[3]=0;a[4]=33;a[5]=18;a[6]=164;a[7]=66;a[8]=121;a[9]=100;a[10]=102;a[11]=54;a[12]=102;a[13]=83;a[14]=66;a[15]=115;a[16]=118;a[17]=119;a[18]=118;a[19]=117;this.b=a.buffer.slice(0,20)};var k=function(a,b,c){this.h=a;this.i=b;this.f=c;this.I=!1;this.b=0;this.m=-1;this.C=null;this.s="";this.g=this.c=this.v=null};k.prototype=new ba;
var n=function(a){m(a.f,chrome.i18n.getMessage("telnet_log_tcp_timeout_setting")+1E4);a.b=window.setTimeout(a.da.bind(a),1E4);chrome.socket.create("tcp",{},function(a){this.m=a.socketId;m(this.f,chrome.i18n.getMessage("telnet_log_socket_created")+this.m+" / "+this.h+" / "+this.i);chrome.socket.connect(this.m,this.h,this.i,this.M.bind(this))}.bind(a))},ea=function(a,b){a.v=b},fa=function(a,b){a.c=b},ga=function(a,b){a.g=b},ha=function(a,b){a.s=b};
k.prototype.V=function(a){m(this.f,chrome.i18n.getMessage("telnet_log_parsed_tcp_response")+a);var b=this.v;p(this);b(a)};k.prototype.P=function(a){if(0<a.resultCode){m(this.f,chrome.i18n.getMessage("telnet_log_parsed_response_size")+a.resultCode);var b=this.V.bind(this);a=String.fromCharCode.apply(null,new Uint8Array(a.data));b(a)}else m(this.f,chrome.i18n.getMessage("telnet_log_error_reading_tcp_data")+a.resultCode),null!=this.c&&(b=this.c,p(this),b(a.resultCode))};
k.prototype.R=function(a){m(this.f,chrome.i18n.getMessage("telnet_log_successfully_sent_data")+a.bytesWritten);chrome.socket.read(this.m,this.P.bind(this))};
k.prototype.M=function(a){m(this.f,chrome.i18n.getMessage("telnet_log_connection_established")+this.h+" / "+this.i+" / "+a);if(null!=this.g){var b=this.g;p(this);b(a)}else{b=this.c;switch(a){case -1:m(this.f,chrome.i18n.getMessage("telnet_log_connection_failure")+this.h+" / "+this.i+" / "+a);m(this.f,chrome.i18n.getMessage("telnet_log_connection_failure_unknown"));p(this);b(-1);return;case -118:m(this.f,chrome.i18n.getMessage("telnet_log_connection_failure")+this.h+" / "+this.i+" / "+a);m(this.f,
chrome.i18n.getMessage("telnet_log_connection_failure_timeout"));p(this);b(-118);return;case -102:m(this.f,chrome.i18n.getMessage("telnet_log_connection_failure")+this.h+" / "+this.i+" / "+a);m(this.f,chrome.i18n.getMessage("telnet_log_connection_failure_refused"));p(this);b(-102);return}m(this.f,chrome.i18n.getMessage("telnet_log_connection_established_successfully")+this.h+" / "+this.i);ca(this.s,function(a){this.C=a;m(this.f,chrome.i18n.getMessage("telnet_log_preparing_to_send_data")+this.C.byteLength);
chrome.socket.write(this.m,this.C,this.R.bind(this))}.bind(this))}};var p=function(a){window.clearTimeout(a.b);a.I||(a.c=null,a.g=null,a.v=null,chrome.socket.disconnect(a.m),chrome.socket.destroy(a.m),a.I=!0)};k.prototype.da=function(){if(null!=this.g){var a=this.g;p(this);a(-118)}else null!=this.c&&(a=this.c,p(this),a(-118))};var q=function(){this.f=this.a=null},r=function(a){a.f(a.a)};q.prototype.B=function(){return!0};var ia={oa:0,pa:1,qa:2,ra:3,sa:4};var t=h(),u=function(a){a="ConnectivityDiagnostics.UA."+a;chrome.metricsPrivate&&(t.log("Histograms - recordUserAction: "+a),chrome.metricsPrivate.recordUserAction(a))},ja=function(a,b){var c=Math.round(b),e="ConnectivityDiagnostics."+a;chrome.metricsPrivate&&18E4>c&&(t.log("Histograms - recordMediumTime: "+e+" "+c),chrome.metricsPrivate.recordMediumTime(e,Math.round(c)))},ka=function(a,b,c,e){a={metricName:"ConnectivityDiagnostics."+a,type:"histogram-linear",min:Math.round(0),max:Math.round(c),buckets:Math.round(e)};
chrome.metricsPrivate&&(t.log("Histograms - recordValue: "+a+" "+b),chrome.metricsPrivate.recordValue(a,Math.round(b)))};var la=function(){this.b={};this.b[0]=[];this.b[1]=[];this.b[2]=[]};var v=function(a,b,c){this.m=a;this.s=b;this.c=c;this.v=!1;this.b=0;this.f=-1;this.g=this.i=this.h=null};v.prototype=new ba;var ma=function(a,b){a.i=b},na=function(a,b){a.g=b};v.prototype.P=function(a){m(this.c,chrome.i18n.getMessage("udpsocket_log_parsed_udp_response")+a);var b=this.i;pa(this);b(a)};
v.prototype.I=function(a){if(0<a.resultCode){m(this.c,chrome.i18n.getMessage("udpsocket_log_parsed_response_size")+a.resultCode);var b=this.P.bind(this);a=String.fromCharCode.apply(null,new Uint8Array(a.data));b(a)}else m(this.c,chrome.i18n.getMessage("udpsocket_log_error_reading_udp_data")+a.resultCode),null!=this.g&&(b=this.g,pa(this),b(a.resultCode))};v.prototype.M=function(a){m(this.c,chrome.i18n.getMessage("udpsocket_log_successfully_sent_data")+a.bytesWritten);chrome.socket.read(this.f,this.I.bind(this))};
var qa=function(a){m(a.c,chrome.i18n.getMessage("udpsocket_log_preparing_to_send_data")+a.h.byteLength);chrome.socket.write(a.f,a.h,a.M.bind(a))};v.prototype.C=function(){function a(a){this.h=a;qa(this)}null===this.h?ca("",a.bind(this)):qa(this)};
var ra=function(a){m(a.c,chrome.i18n.getMessage("udpsocket_log_udp_timeout_setting")+1E4);a.b=window.setTimeout(a.R.bind(a),1E4);chrome.socket.create("udp",null,function(a){this.f=a.socketId;m(this.c,chrome.i18n.getMessage("udpsocket_log_socket_created")+this.f+" / "+this.m+" / "+this.s);chrome.socket.connect(this.f,this.m,this.s,this.C.bind(this))}.bind(a))},pa=function(a){window.clearTimeout(a.b);a.v||(a.g=null,a.i=null,chrome.socket.disconnect(a.f),chrome.socket.destroy(a.f),a.v=!0)};
v.prototype.R=function(){if(null!=this.g){var a=this.g;pa(this);a(-118)}};var w=100;var sa=function(){},ta=null;sa.prototype.b=function(a){9==a.keyCode&&ua(!0);27==a.keyCode&&document.activeElement&&document.activeElement.blur()};sa.prototype.f=function(){ua(!1)};var ua=function(a){document.body.className=a?"":"no-focus-outline"};var va=function(){this.b=null};va.prototype.w=function(a){var b=document.createElement("div");b.id="page-body-spinner-container";this.b=document.createElement("div");this.b.id="page-body-spinner-loading-message";b.appendChild(this.b);a.appendChild(b);return b};var wa=function(){this.f=this.b=this.c=this.g=!1},xa=null,x=function(){xa||(xa=new wa);return xa},ya=function(a){a.b||(u("PassingTestsShown"),a.b=!0)};var za=function(){};
za.prototype.w=function(a){var b=document.createElement("div");b.id="no-problems-result-container";var c=document.createElement("div");c.id="no-problems-result-contents";b.appendChild(c);var e=document.createElement("div");e.innerHTML='<div class="no-problem-result-inner-contents"><div id="no-problem-result-img" role="alert"></div></div><div class="no-problem-result-inner-contents">'+chrome.i18n.getMessage("result_no_connectivity_problems")+"</div>";c.appendChild(e);a.appendChild(b);return b};var Aa=function(){this.b=null};Aa.prototype.w=function(a){var b=document.createElement("div");b.id="page-body-spinner-container";var c=document.createElement("div");c.id="page-body-spinner-progress-percentile";b.appendChild(c);this.b=document.createElement("div");this.b.id="page-body-spinner-progress-content";c.appendChild(this.b);c=document.createElement("div");c.id="page-body-spinner-loading-message";c.innerHTML=chrome.i18n.getMessage("tests_running_message");b.appendChild(c);a.appendChild(b);return b};
var Ba=function(a,b){if(a.b){var c=0;100==b?c=100:90<b?c=90:75<b?c=75:60<b?c=60:50<b?c=50:40<b?c=40:25<b?c=25:15<b&&(c=15);a.b.innerHTML=c+"%";a.b.className="spinner-progress-"+c}};var Ca=function(){this.f=[];this.c=[];this.b=!0},Da=null,Ea=function(){Da||(Da=new Ca);return Da};Ca.prototype.h=function(){this.b=!this.b;for(var a=0;a<this.f.length;a++)this.f[a](this.b)};Ca.prototype.g=function(){for(var a=0;a<this.c.length;a++)this.c[a]()};var y=function(a){this.f=a;this.m=x();this.g=this.b=this.c=null};
y.prototype.w=function(a){var b=document.createElement("div"),c="inner-logs-container-"+this.f.b,e=document.createElement("div");this.b=document.createElement("a");this.b.innerHTML=chrome.i18n.getMessage("test_result_show_logs");this.b.setAttribute("aria-expanded","false");this.b.setAttribute("aria-controls",c);w++;this.b.tabIndex=w;this.b.className="show-logs-link show-logs-link-a";this.b.addEventListener("click",this.i.bind(this,this.f.b),!1);this.b.addEventListener("keyup",this.i.bind(this,this.f.b),
!1);e.appendChild(this.b);b.appendChild(e);this.c=document.createElement("div");this.c.id=c;this.c.className="element-hidden";this.g=document.createElement("textarea");w++;this.g.tabIndex=w;this.g.className="test-results-logs-textarea";this.g.readOnly=!0;this.g.cols=60;this.g.rows=10;c=chrome.i18n.getMessage("test_result_log_summary")+"\n";c+=chrome.i18n.getMessage("test_result_log_test_name")+this.f.c+"\n";c+=chrome.i18n.getMessage("test_result_log_test_id")+this.f.b+"\n";c+=chrome.i18n.getMessage("test_result_log_test_verdict");
switch(this.f.j){case 0:c+=chrome.i18n.getMessage("test_result_log_verdict_no_problem");break;case 2:c+=chrome.i18n.getMessage("test_result_log_verdict_problem");break;case 1:c+=chrome.i18n.getMessage("test_result_log_verdict_potential_problem")}c+="\n\n";c+=chrome.i18n.getMessage("test_result_log_criteria")+"\n";c+=this.f.f;0<this.f.g.length&&(c+="\n",c+="\n",c+=chrome.i18n.getMessage("test_result_log_support_details")+"\n",c+=this.f.g);for(var c=c+"\n",c=c+"\n",c=c+(chrome.i18n.getMessage("test_result_log_details")+
"\n"),e=this.f.i,l=0;l<e.length;l++)c+=e[l]+"\n";this.g.value=c;this.c.appendChild(this.g);c=document.createElement("div");w++;c.tabIndex=w;c.addEventListener("click",this.h.bind(this,this.f.b),!1);c.addEventListener("keyup",this.h.bind(this,this.f.b),!1);c.innerHTML=chrome.i18n.getMessage("test_result_copy_logs");c.className="show-logs-link show-logs-link-a test-results-logs-textarea";this.c.appendChild(c);b.appendChild(this.c);a.appendChild(b);return b};
y.prototype.i=function(a,b){if(!b||"keyup"!=b.type||13===b.keyCode){var c=this.m;c.c||(u("LogsShown"),c.c=!0);"element-hidden"===this.c.className?(this.b.innerHTML=chrome.i18n.getMessage("test_result_hide_logs"),this.b.setAttribute("aria-expanded","true"),this.c.className="test-result-log-container"):(this.b.innerHTML=chrome.i18n.getMessage("test_result_show_logs"),this.b.setAttribute("aria-expanded","false"),this.c.className="element-hidden");b&&"click"==b.type&&this.b.blur();b.stopPropagation()}};
y.prototype.h=function(a,b){b&&"keyup"==b.type&&13!==b.keyCode||(this.g.select(),document.execCommand("Copy"),b.stopPropagation())};var Fa=function(a){this.g=a;this.i=x();this.b=this.f=null};
Fa.prototype.w=function(a){this.b=document.createElement("div");this.b.className="test-results-contents-frame";this.b.addEventListener("click",this.h.bind(this,this.g.b),!1);this.b.addEventListener("keyup",this.h.bind(this,this.g.b),!1);var b="",c="";switch(this.g.j){case 0:c="test-title test-verdict-pass";b="no-problem-result-title-img";break;case 1:c="test-title test-verdict-warning";b="potential-problem-result-title-img";break;case 2:c="test-title test-verdict-fail",b="problem-result-title-img"}var e=
"test-result-more-info-"+this.g.b;this.f=document.createElement("div");this.f.className=c;w++;this.f.tabIndex=w;this.f.setAttribute("aria-expanded","false");this.f.setAttribute("aria-controls",e);this.f.innerHTML='<div class="test-title-contents-cell"><div class="'+b+'"></div></div>';b=document.createElement("div");b.className="test-title-contents-cell";b.innerHTML=this.g.getTitle();this.f.appendChild(b);this.b.appendChild(this.f);this.c=document.createElement("div");this.c.id=e;this.c.className=
"element-hidden";this.b.appendChild(this.c);e=document.createElement("div");e.appendChild(document.createTextNode(this.g.l));e.className="test-subtitle";this.c.appendChild(e);e=document.createElement("div");(new y(this.g)).w(e);this.c.appendChild(e);a.appendChild(this.b);return this.b};
Fa.prototype.h=function(a,b){if(!b||"keyup"!=b.type||13===b.keyCode)if(b&&"click"==b.type&&this.b.blur(),!b||void 0==b.srcElement||"test-results-logs-textarea"!=b.srcElement.className){var c=this.i;c.f||(u("TestResultExpanded"),c.f=!0);"element-hidden"==this.c.className?(this.c.className="element-block",this.b.className="test-results-contents-frame test-results-contents-frame-expanded",this.f.setAttribute("aria-expanded",!0)):(this.c.className="element-hidden",this.b.className="test-results-contents-frame",
this.f.setAttribute("aria-expanded",!1))}};var z=function(a,b){this.f=a;this.b=b};z.prototype.w=function(a){var b=document.createElement("div"),c=document.createElement("div");c.className="test-result-title test-results-contents";c.appendChild(document.createTextNode(this.f));b.appendChild(c);for(var c=document.createElement("div"),e=0;e<this.b.length;e++)(new Fa(this.b[e])).w(c);b.appendChild(c);a.appendChild(b);return b};var Ga=function(a){this.f=a;this.h=x();this.c=Ea();this.b=null};
Ga.prototype.w=function(a){var b=document.createElement("div");b.id="test-results-frame";b.setAttribute("role","alert");var c=document.createElement("div");c.id="test-results-contents";var e=this.f.b[2];0<e.length&&(new z("Failing Tests",e)).w(c);e=this.f.b[1];0<e.length&&(new z("Warning Tests",e)).w(c);e=this.f.b[0];0<e.length&&(this.b=document.createElement("div"),this.b.id="passing-tests-container",this.b.className="element-hidden",(new z("Passing Tests",e)).w(this.b),c.appendChild(this.b));b.appendChild(c);
a.appendChild(b);a=this.g.bind(this);this.c.f.push(a);this.g();return b};Ga.prototype.g=function(){this.c.b?(ya(this.h),null!=this.b&&(this.b.className="element-block")):null!=this.b&&(this.b.className="element-hidden")};var A=function(){return-1!=navigator.userAgent.indexOf(" CrOS ")},B=function(a){for(var b="",c=0;c<a;c++)b+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()));return b},C=function(){return chrome.runtime.getManifest().version},Ha=function(){return void 0!==chrome.dns&&void 0!==chrome.dns.resolve},Ia=function(){var a=navigator.userAgent,b=a.indexOf(" Chrome/");if(-1==b)return-1;a=a.substr(b+8,5);return parseInt(a.substr(0,a.indexOf(".")),10)};var Ja=function(){this.b={}},Ka=null,La=function(a,b,c){this.b=a;this.f=b;this.c=c},Ma=function(){Ka||(Ka=new Ja);return Ka};Ja.prototype.f=function(){var a=Na(this);chrome.runtime.sendMessage("gfdkimpbcpahaombhbimeihdjnejgicl",a,function(){})};
var Na=function(a){var b={requestFeedback:!0,feedbackInfo:{}};b.feedbackInfo.description="";var c={key:"CCD_APP_VERSION_NUMBER",value:C()},e="",l;for(l in a.b){l=parseInt(l,10);var E=a.b[l],e=e+("Test ID: "+E.b+", Test Verdict: "+E.f+", Time Elapsed: "+E.c+"\n")}b.feedbackInfo.systemInformation=[c,{key:"DIAGNOSTICS",value:"Connectivity"},{key:"CCD_APP_TEST_RESULTS",value:e}];a="";for(var oa in f)void 0!=f[oa].toString&&(a+="Name: "+oa+", Value: "+f[oa].toString()+"\n");b.feedbackInfo.systemInformation.push({key:"CCD_APP_FLAGS",
value:a});return b};var D=function(a){this.i=[];this.b=a;this.j=4;this.c=this.g=this.f=this.h=this.l="";this.J=h()};D.prototype.setTitle=function(a){this.h=a};D.prototype.getTitle=function(){return this.h};var m=function(a,b){var c;c=(new Date((new Date).getTime())).toString();c+=" - "+b;a.i.push(c);a.J.log(c)};var F=function(){this.a=new D(5);var a=chrome.i18n.getMessage("captiveportalhttptest_name");this.a.c=a;a=chrome.i18n.getMessage("captiveportalhttptest_no_problem_threshold")+"\n";a+=chrome.i18n.getMessage("captiveportalhttptest_potentialproblem_threshold")+"\n";a+=chrome.i18n.getMessage("captiveportalhttptest_problem_threshold")+"\n";this.a.f=a;this.c=0;this.m=[];this.i=[];this.g=this.b=0;this.u=[];for(a=0;3>a;a++)this.u.push(B(8)+"-ccd-testing-v4.metric.gstatic.com")};F.prototype=new q;d=F.prototype;
d.B=function(){return!0};d.A=function(a){this.f=a;this.h()};
d.o=function(){this.a.j=0;this.a.setTitle(chrome.i18n.getMessage("captiveportalhttptest_noproblem_title"));var a=chrome.i18n.getMessage("captiveportalhttptest_noproblem_subtitle");this.a.l=a;if(this.g>=.2*this.u.length)this.a.j=1,this.a.setTitle(chrome.i18n.getMessage("captiveportalhttptest_potentialproblem_title")),a=chrome.i18n.getMessage("captiveportalhttptest_potentialproblem_subtitle"),this.a.l=a;else for(a=0;a<this.u.length-this.g;a++)if(204!=this.i[a]){this.a.j=2;this.a.setTitle(chrome.i18n.getMessage("captiveportalhttptest_problem_title"));
a=chrome.i18n.getMessage("captiveportalhttptest_problem_subtitle");this.a.l=a;break}};
d.fa=function(a){var b;b=a.indexOf("\n\n");b=-1==b?"-1":a.substr(0,b);var c;-1==a.indexOf("\n")||"HTTP/1.1 "!=a.substring(0,9)?(m(this.a,chrome.i18n.getMessage("captiveportalhttptest_log_error_extracting_status_code")),c=-1):c=parseInt(a.substring(9,12),10);this.m.push(a.length);this.i.push(c);m(this.a,chrome.i18n.getMessage("captiveportalhttptest_log_response_length")+this.c+" / "+a.length);m(this.a,chrome.i18n.getMessage("captiveportalhttptest_log_response_code")+c);m(this.a,chrome.i18n.getMessage("captiveportalhttptest_log_http_response")+
b);Oa(this)};d.ea=function(a){m(this.a,chrome.i18n.getMessage("captiveportalhttptest_log_network_error")+this.c+" / "+a);this.g++;Oa(this)};var Oa=function(a){a.c++;window.clearTimeout(a.b);a.c<a.u.length?a.b=setTimeout(a.h.bind(a),2E3):(a.o(),r(a))};
F.prototype.h=function(){var a=this.c,b=new k(this.u[a],80,this.a),c=this.fa.bind(this);b.v=c;c=this.ea.bind(this);b.c=c;a="GET /generate_204 HTTP/1.1\nHost: "+this.u[a]+"\nConnection: close\nUser-Agent: "+(navigator.userAgent+" CCD:"+C())+"\n\n";b.s=a;n(b)};var G=function(){this.a=new D(0);var a=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_name");this.a.c=a;a=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_no_problem_threshold")+"\n";a+=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_problem_threshold")+"\n";this.a.f=a;this.b=!0};G.prototype=new q;
G.prototype.o=function(){if(this.b){this.a.j=2;this.a.setTitle(chrome.i18n.getMessage("chromeosinternetdisconnectedtest_problem_title"));var a=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_problem_subtitle")}else this.a.j=0,this.a.setTitle(chrome.i18n.getMessage("chromeosinternetdisconnectedtest_noproblem_title")),a=chrome.i18n.getMessage("chromeosinternetdisconnectedtest_noproblem_subtitle");this.a.l=a};
G.prototype.A=function(a){this.f=a;chrome.networkingPrivate.getNetworks({networkType:"All",visible:!0},this.c.bind(this))};G.prototype.B=function(){return A()&&void 0!==chrome.networkingPrivate&&!0};G.prototype.c=function(a){m(this.a,chrome.i18n.getMessage("chromeosinternetdisconnectedtest_log_available_networks")+a.length);if(0==a.length)this.b=!0;else for(var b=0;b<a.length;b++)if("Connected"==a[b].ConnectionState){this.b=!1;break}this.o();r(this)};var H=function(){this.a=new D(10);var a=chrome.i18n.getMessage("chromeossignalstrengthtest_name");this.a.c=a;a=chrome.i18n.getMessage("chromeossignalstrengthtest_no_problem_strength")+30+"\n";a+=chrome.i18n.getMessage("chromeossignalstrengthtest_problem_strength")+30+"\n";this.a.f=a;this.b=-1};H.prototype=new q;
H.prototype.o=function(){if(30>this.b&&-1!=this.b){this.a.j=2;this.a.setTitle(chrome.i18n.getMessage("chromeossignalstrengthtest_problem_title"));var a=chrome.i18n.getMessage("chromeossignalstrengthtest_problem_subtitle");this.a.l=a}else-1!=this.b?(this.a.j=0,this.a.setTitle(chrome.i18n.getMessage("chromeossignalstrengthtest_noproblem_title")),a=chrome.i18n.getMessage("chromeossignalstrengthtest_noproblem_subtitle"),this.a.l=a):this.a.j=4};
H.prototype.A=function(a){this.f=a;chrome.networkingPrivate.getNetworks({networkType:"All",visible:!0},this.c.bind(this))};H.prototype.B=function(){return A()&&void 0!==chrome.networkingPrivate&&!0};
H.prototype.c=function(a){for(var b=0;b<a.length;b++)if("Connected"==a[b].ConnectionState&&void 0!=a[b].WiFi){m(this.a,chrome.i18n.getMessage("chromeossignalstrengthtest_log_signal_strength")+a[b].Name+" / "+a[b].WiFi.SignalStrength);this.b=a[b].WiFi.SignalStrength;ka("ChromeOsSignalStrength",this.b,100,10);break}this.o();r(this)};var Pa=function(){this.a=new D(4);var a=chrome.i18n.getMessage("dnspoisoningtest_name");this.a.c=a;a=chrome.i18n.getMessage("dnspoisoningtest_no_problem_threshold")+"\n";a+=chrome.i18n.getMessage("dnspoisoningtest_problem_threshold")+"\n";this.a.f=a;this.i=3;this.c=0;this.g=[];this.m=[];this.b=0;this.h=["ccd-testing-v4.gstatic.com"]};Pa.prototype=new q;var Qa=[-7,-803];d=Pa.prototype;d.B=function(){return Ha()&&!0};d.A=function(a){this.f=a;this.Y()};
d.o=function(){var a;a:{for(a=0;a<this.h.length;a++)if("216.239.32.21"!=this.g[a]&&"216.239.34.21"!=this.g[a]&&"216.239.36.21"!=this.g[a]&&"216.239.38.21"!=this.g[a]){a=!0;break a}a=!1}a?(this.a.j=2,this.a.setTitle(chrome.i18n.getMessage("dnspoisoningtest_problem_title")),a=chrome.i18n.getMessage("dnspoisoningtest_problem_subtitle")):(this.a.j=0,this.a.setTitle(chrome.i18n.getMessage("dnspoisoningtest_noproblem_title")),a=chrome.i18n.getMessage("dnspoisoningtest_noproblem_subtitle"));this.a.l=a};
d.ha=function(a){window.clearTimeout(this.b);void 0==a||void 0==a.resultCode?(m(this.a,"#"+this.c+chrome.i18n.getMessage("dnspoisoningtest_noresult_code_returned")),this.a.j=3,r(this)):(-1<Qa.indexOf(a.resultCode)&&0<this.i?(this.c--,this.i--):(this.m.push(a.resultCode),m(this.a,"#"+this.c+chrome.i18n.getMessage("dnspoisoningtest_log_statuscode_returned")+a.resultCode),void 0!=a.address?(this.g.push(a.address),m(this.a,"#"+this.c+chrome.i18n.getMessage("dnspoisoningtest_log_address_returned")+a.address)):
(this.g.push(""),m(this.a,"#"+this.c+chrome.i18n.getMessage("dnspoisoningtest_no_addr_returned")))),this.c++,this.c>=0+this.h.length?(this.o(),r(this)):this.b=setTimeout(this.Y.bind(this),1E3))};d.Y=function(){var a="";this.c<this.h.length?a=this.h[this.c]:(a=B(25),a+=".com");m(this.a,chrome.i18n.getMessage("dnspoisoningtest_beginning_resolution")+this.c+" / "+a);chrome.dns.resolve(a,this.ha.bind(this))};var I=function(){this.a=new D(14);var a=chrome.i18n.getMessage("endtoendtest_name");this.a.c=a;a=chrome.i18n.getMessage("endtoendtest_no_problem_threshold")+"\n";a+=chrome.i18n.getMessage("endtoendtest_problem_threshold")+"\n";this.a.f=a;this.s=!1;this.c=null;this.i=3;this.g=0;this.m=[];this.b=0;this.h=["https://www.google.com/generate_204","https://mail.google.com/generate_204","https://drive.google.com/generate_204","https://plus.google.com/generate_204"]};I.prototype=new q;var Ra=[204];d=I.prototype;
d.B=function(){return!0};d.A=function(a){this.f=a;J(this)};d.o=function(){var a;if(!(a=this.s))a:{for(a=0;a<this.h.length;a++)if(0>Ra.indexOf(this.m[a])){a=!0;break a}a=!1}a?(this.a.j=2,this.a.setTitle(chrome.i18n.getMessage("endtoendtest_problem_title")),a=chrome.i18n.getMessage("endtoendtest_problem_subtitle")):(this.a.j=0,this.a.setTitle(chrome.i18n.getMessage("endtoendtest_noproblem_title")),a=chrome.i18n.getMessage("endtoendtest_noproblem_subtitle"));this.a.l=a};
d.ma=function(){4==this.c.readyState&&(m(this.a,chrome.i18n.getMessage("endtoendtest_success_request")+this.h[this.g]+" /// "+this.c.status),this.m.push(this.c.status),this.g++,J(this))};d.na=function(){this.i--;J(this)};d.la=function(){this.i--;m(this.a,chrome.i18n.getMessage("endtoendtest_error_in_request")+this.h[this.g]);0>this.i?(this.o(),r(this)):(m(this.a,chrome.i18n.getMessage("endtoendtest_error_in_request_on_final")+this.h[this.g]),this.s=!0,J(this))};
var J=function(a){a.g>=a.h.length||1>a.i?(a.o(),r(a)):a.b=setTimeout(a.v.bind(a),1E3)};I.prototype.v=function(){var a=this.h[this.g];m(this.a,chrome.i18n.getMessage("endtoendtest_beginning_resolution")+this.g+" / "+a);this.c=new XMLHttpRequest;this.c.ontimeout=this.na.bind(this);this.c.onload=this.ma.bind(this);this.c.onerror=this.la.bind(this);this.c.open("GET",a,!0);this.c.send()};var K=function(){this.a=new D(12);var a=chrome.i18n.getMessage("hangoutsblockedtest_name");this.a.c=a;a=chrome.i18n.getMessage("hangoutsblockedtest_no_problem_criteria")+"\n";a+=chrome.i18n.getMessage("hangoutsblockedtest_problem_criteria")+"\n";this.a.f=a;this.a.g="https://support.google.com/a/answer/1279090";this.H=this.D=!1;this.T=[443,19305,19306,19307,19308];this.U=[19302,19303,19304,19305,19306,19307,19308,19309];this.K=this.L=0;this.F=2;this.S=["apis.google.com","talkgadget.google.com","clients6.google.com",
"hangouts.google.com"];this.O=0};K.prototype=new q;
K.prototype.o=function(){if(this.D&&1===this.F){this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_noproblem_title"));var a=chrome.i18n.getMessage("hangoutsblockedtest_noproblem_subtitle");this.a.l=a;this.a.j=0}else!1===this.D&&this.H&&1===this.F?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_subtitle_udp_media_blocked"),this.a.l=a,this.a.j=1):(!1===this.D&&this.H&&1!==this.F?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_title")),
a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle_tcp_chat_blocked")):this.D&&this.H&&1!==this.F?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle_tcp_chat_blocked")):this.D&&!1===this.H&&1!==this.F?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_potentialproblem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle_tcp_media_tcp_chat_blocked")):!1===this.D&&
!1===this.H&&1!==this.F?(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_problem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle_udp_media_tcp_media_blocked")):(this.a.setTitle(chrome.i18n.getMessage("hangoutsblockedtest_problem_title")),a=chrome.i18n.getMessage("hangoutsblockedtest_problem_subtitle")),this.a.l=a,this.a.j=2)};K.prototype.B=function(){return!0};K.prototype.A=function(a){this.f=a;L(this)};
var L=function(a){a.L<a.U.length&&!1===a.D?Sa(a):a.K<a.T.length&&!1===a.H?Ta(a):a.O<a.S.length&&2===a.F?Ua(a):(a.o(),a.f(a.a))},Ua=function(a){var b=new k(a.S[a.O],443,a.a);b.s="stub data";var c=function(){this.F=0;m(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_tcp_connection_failure")+this.S[this.O]);L(this)};fa(b,c.bind(a));ga(b,function(a){0===a?(this.O++,this.O===this.S.length&&(this.F=1),L(this)):c.apply(this)}.bind(a));n(b)},Ta=function(a){var b=new k("stun.l.google.com",a.T[a.K],
a.a);fa(b,function(){this.H=!1;m(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_tcp_connection_failure")+this.T[this.K]);this.K++;L(this)}.bind(a));ga(b,function(a){0===a?(this.H=!0,m(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_tcp_connection_success")+this.T[this.K])):(this.H=!1,this.K++);L(this)}.bind(a));n(b)},Sa=function(a){var b=new v("stun.l.google.com",a.U[a.L],a.a);b.h=(new da).b;na(b,function(){this.D=!1;m(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_udp_connection_failure")+
this.U[this.L]);this.L++;L(this)}.bind(a));ma(b,function(a){1<a.length?(this.D=!0,m(this.a,chrome.i18n.getMessage("hangoutsblockedtest_log_udp_connection_success")+this.U[this.L])):(this.D=!1,this.L++);L(this)}.bind(a));ra(b)};var Va=function(){this.a=new D(9);var a=chrome.i18n.getMessage("httplatencytest_name");this.a.c=a;a=chrome.i18n.getMessage("httplatencytest_no_problem_time")+400+"\n";a+=chrome.i18n.getMessage("httplatencytest_potential_problem_time")+400+"-500\n";a+=chrome.i18n.getMessage("httplatencytest_problem_time")+500+"\n";this.a.f=a;this.N=this.b=this.g=this.c=0;this.u=[];for(a=0;3>a;a++)this.u.push(B(8)+"-ccd-testing-v4.metric.gstatic.com")};Va.prototype=new q;d=Va.prototype;d.B=function(){return!0};
d.A=function(a){this.f=a;this.Z()};
d.o=function(){var a=this.g/this.u.length,a=Math.round(100*a)/100;ja("HTTP_LATENCY",a);m(this.a,chrome.i18n.getMessage("httplatencytest_log_response_time")+this.g);m(this.a,chrome.i18n.getMessage("httplatencytest_log_num_requests")+this.u.length);m(this.a,chrome.i18n.getMessage("httplatencytest_log_average_time")+a);400>a?(this.a.setTitle(chrome.i18n.getMessage("httplatencytest_noproblem_title")),a=chrome.i18n.getMessage("httplatencytest_noproblem_subtitle"),this.a.l=a,this.a.j=0):500>a?(this.a.setTitle(chrome.i18n.getMessage("httplatencytest_potentialproblem_title")),
a=chrome.i18n.getMessage("httplatencytest_potentialproblem_subtitle"),this.a.l=a,this.a.j=1):(this.a.setTitle(chrome.i18n.getMessage("httplatencytest_problem_title")),a=chrome.i18n.getMessage("httplatencytest_problem_subtitle"),this.a.l=a,this.a.j=2)};
d.ja=function(){var a=(new Date).getTime(),b=a-this.N;this.g+=b;m(this.a,chrome.i18n.getMessage("httplatencytest_log_response_details")+this.c+" / "+a+" / "+b);this.c++;window.clearTimeout(this.b);this.c<this.u.length?this.b=setTimeout(this.Z.bind(this),2E3):(this.o(),r(this))};d.ia=function(a){m(this.a,chrome.i18n.getMessage("httplatencytest_log_network_error")+this.c+" / "+a);this.c++;window.clearTimeout(this.b);this.a.j=3;r(this)};
d.Z=function(){var a=this.c,b=new k(this.u[a],80,this.a);ea(b,this.ja.bind(this));fa(b,this.ia.bind(this));ha(b,"GET /generate_204 HTTP/1.1\nHost: "+this.u[a]+"\nConnection: close\nUser-Agent: "+(navigator.userAgent+" CCD:"+C())+"\n\n");var c=null,e=function(){chrome.socket.disconnect(c);chrome.socket.destroy(c);this.N=(new Date).getTime();n(b)};chrome.socket.create("tcp",{},function(b){c=b.socketId;chrome.socket.connect(c,this.u[a],80,e.bind(this))}.bind(this))};var M=function(){this.a=new D(11);var a=chrome.i18n.getMessage("pinggatewaytest_name");this.a.c=a;a=chrome.i18n.getMessage("pinggatewaytest_no_problem_time")+1500+"\n";a+=chrome.i18n.getMessage("pinggatewaytest_problem_time")+1500+"\n";this.a.f=a;this.b=!0};M.prototype=new q;M.prototype.B=function(){return A()&&!0&&31<=Ia()&&void 0!==chrome.diagnostics&&void 0!==chrome.diagnostics.sendPacket};
M.prototype.o=function(a){var b=function(){this.a.setTitle(chrome.i18n.getMessage("pinggatewaytest_problem_title"));var a=chrome.i18n.getMessage("pinggatewaytest_problem_subtitle");this.a.l=a;this.a.j=2},c=function(){this.a.setTitle(chrome.i18n.getMessage("pinggatewaytest_noproblem_title"));var a=chrome.i18n.getMessage("pinggatewaytest_noproblem_subtitle");this.a.l=a;this.a.j=0};this.b?c.call(this):void 0==a||void 0==a.latency?b.call(this):"8.8.8.8"==a.ip?c.call(this):0==a.latency||1500<a.latency?
b.call(this):c.call(this)};M.prototype.A=function(a){this.f=a;Wa(this)};
var Wa=function(a){chrome.diagnostics.sendPacket({ip:"8.8.8.8",ttl:1},function(a){a&&void 0!==a.ip&&void 0!=a.latency?"8.8.8.8"===a.ip?(this.b=!1,m(this.a,chrome.i18n.getMessage("pinggatewaytest_log_same_ip_response")+"8.8.8.8"),this.o(a),r(this)):(this.b=!1,m(this.a,chrome.i18n.getMessage("pinggatewaytest_log_gateway_known")+a.ip),this.c.call(this,a.ip)):(this.b=!0,m(this.a,chrome.i18n.getMessage("pinggatewaytest_log_gateway_unknown")),this.o(a),r(this))}.bind(a))};
M.prototype.c=function(a){chrome.diagnostics.sendPacket({ip:a,ttl:1},this.g.bind(this))};M.prototype.g=function(a){void 0===a||0===a.latency?m(this.a,chrome.i18n.getMessage("pinggatewaytest_log_failure")):m(this.a,chrome.i18n.getMessage("pinggatewaytest_log_latency")+a.latency);this.o(a);r(this)};var Xa=function(){this.a=new D(8);var a=chrome.i18n.getMessage("resolverlatencytest_name");this.a.c=a;a=chrome.i18n.getMessage("resolverlatencytest_no_problem_time")+400+"\n";a+=chrome.i18n.getMessage("resolverlatencytest_potential_problem_time")+400+"-500\n";a+=chrome.i18n.getMessage("resolverlatencytest_problem_time")+500+"\n";this.a.f=a;this.N=this.g=this.c=0;this.u=[];for(a=0;3>a;a++)this.u.push(B(8)+"-ccd-testing-v4.metric.gstatic.com")};Xa.prototype=new q;d=Xa.prototype;
d.B=function(){return Ha()&&!0};d.A=function(a){this.f=a;this.ba()};
d.o=function(){var a=this.g/this.u.length,a=Math.round(100*a)/100;ja("RESOLVER_LATENCY",a);m(this.a,chrome.i18n.getMessage("resolverlatencytest_total_resolution_time")+this.g);m(this.a,chrome.i18n.getMessage("resolverlatencytest_total_hosts_resolved")+this.u.length);m(this.a,chrome.i18n.getMessage("resolverlatencytest_average_resolution_time")+a);400>a?(this.a.setTitle(chrome.i18n.getMessage("resolverlatencytest_noproblem_title")),a=chrome.i18n.getMessage("resolverlatencytest_noproblem_subtitle"),
this.a.l=a,this.a.j=0):500>a?(this.a.setTitle(chrome.i18n.getMessage("resolverlatencytest_potentialproblem_title")),a=chrome.i18n.getMessage("resolverlatencytest_potential_problem_subtitle"),this.a.l=a,this.a.j=1):(this.a.setTitle(chrome.i18n.getMessage("resolverlatencytest_problem_title")),a=chrome.i18n.getMessage("resolverlatencytest_problem_subtitle"),this.a.l=a,this.a.j=2)};
d.ka=function(){var a=(new Date).getTime(),b=a-this.N;this.g+=b;m(this.a,chrome.i18n.getMessage("resolverlatencytest_queryresult_received")+this.c+" / "+a+" / "+b+" / "+this.N);this.c++;window.clearTimeout(this.b);this.c<this.u.length?this.b=window.setTimeout(this.ba.bind(this),1E3):(this.o(),r(this))};d.ba=function(){var a=this.u[this.c];this.N=(new Date).getTime();m(this.a,chrome.i18n.getMessage("resolverlatencytest_beginning_resolution")+this.c+" "+a);chrome.dns.resolve(a,this.ka.bind(this))};var N=function(){this.a=new D(3);var a=chrome.i18n.getMessage("resolverpresenttest_name");this.a.c=a;a=chrome.i18n.getMessage("resolverpresenttest_criteria_failure")+"\n";a+=chrome.i18n.getMessage("resolverpresenttest_criteria_success")+"\n";this.a.f=a};N.prototype=new q;N.prototype.B=function(){return Ha()&&!0};N.prototype.A=function(a){this.f=a;m(this.a,chrome.i18n.getMessage("resolverpresenttest_gettinghostname")+"ccd-testing-v4.gstatic.com");chrome.dns.resolve("ccd-testing-v4.gstatic.com",this.b.bind(this))};
N.prototype.o=function(a){if(void 0!=a.resultCode&&0==a.resultCode){this.a.setTitle(chrome.i18n.getMessage("resolverpresenttest_noproblem_title"));var b=chrome.i18n.getMessage("resolverpresenttest_noproblem_subtitle");this.a.l=b;m(this.a,chrome.i18n.getMessage("resolverpresenttest_hostnameresult")+a.address);m(this.a,chrome.i18n.getMessage("resolverpresenttest_log_statuscodesuccess")+a.resultCode);this.a.j=0}else this.a.setTitle(chrome.i18n.getMessage("resolverpresenttest_problem_title")),b=chrome.i18n.getMessage("resolverpresenttest_problem_subtitle"),
this.a.l=b,m(this.a,chrome.i18n.getMessage("resolverpresenttest_log_statuscodefailure")+a.resultCode),this.a.j=2};N.prototype.b=function(a){void 0==a?(m(this.a,chrome.i18n.getMessage("resolverpresenttest_testfailed")),this.a.j=3):(m(this.a,chrome.i18n.getMessage("resolverpresenttest_testcompleted")),this.o(a));r(this)};var O=function(a,b){this.a=new D(b);var c=chrome.i18n.getMessage("tcpfirewalltest_name");this.a.c=c;c=chrome.i18n.getMessage("tcpfirewalltest_no_problem_threshold")+Math.round(100*(1-.8))+"%\n";c+=chrome.i18n.getMessage("tcpfirewalltest_problem_threshold")+"100%\n";c+=chrome.i18n.getMessage("tcpfirewalltest_potential_problem_threshold")+Math.round(100*(1-.8))+"% - 100%\n";this.a.f=c;this.m=3;this.i=[];this.g=a;this.b=this.c=0;this.h="www.google.com mail.google.com drive.google.com accounts.google.com plus.google.com groups.google.com".split(" ");
for(c=0;3>c;c++)this.h.push(B(8)+"-ccd-testing-v4.metric.gstatic.com")};O.prototype=new q;var Ya=[-7,-118];
O.prototype.o=function(){for(var a=0,b=0;b<this.h.length;b++)0!==this.i[b]&&(m(this.a,"#"+b+chrome.i18n.getMessage("tcpfirewalltest_log_count_failed_attempt")+this.i[b]),a++);a<(1-.8)*this.h.length?(this.a.j=0,this.a.setTitle(chrome.i18n.getMessage("tcpfirewalltest_noproblem_title")+this.g),b=chrome.i18n.getMessage("tcpfirewalltest_noproblem_subtitle")+this.g):a>=this.h.length?(this.a.j=2,this.a.setTitle(chrome.i18n.getMessage("tcpfirewalltest_problem_title")+this.g),b=chrome.i18n.getMessage("tcpfirewalltest_problem_subtitle")):
(this.a.j=1,this.a.setTitle(chrome.i18n.getMessage("tcpfirewalltest_potentialproblem_title")+this.g),b=chrome.i18n.getMessage("tcpfirewalltest_potentialproblem_subtitle"));this.a.l=b;m(this.a,chrome.i18n.getMessage("tcpfirewalltest_log_analysis_summary")+this.c+" / "+this.g+" / "+a)};O.prototype.A=function(a){this.f=a;this.s()};
O.prototype.v=function(a){window.clearTimeout(this.b);-1<Ya.indexOf(a)&&0<this.m?(this.c--,this.m--):(m(this.a,"# "+this.c+chrome.i18n.getMessage("tcpfirewalltest_log_connection_status_known")+ +a),this.i[this.c]=a);this.c++;this.c<this.h.length?this.b=window.setTimeout(this.s.bind(this),500):(this.o(),r(this))};
O.prototype.s=function(){var a=this.h[this.c];m(this.a,chrome.i18n.getMessage("tcpfirewalltest_log_connection_about_begun")+this.c+" / "+a+" / "+this.g);var a=new k(a,this.g,this.a),b=this.v.bind(this);a.g=b;a.s="GET / HTTP/1.1";n(a)};var P=function(){this.a=new D(0);var a=chrome.i18n.getMessage("chromeinternetdisconnectedtest_name");this.a.c=a;a=chrome.i18n.getMessage("chromeinternetdisconnectedtest_no_problem_threshold")+100+"\n";a+=chrome.i18n.getMessage("chromeinternetdisconnectedtest_problem_threshold")+100+"\n";this.a.f=a;this.c=0;this.g=[];this.b=0;this.h=[];for(a=0;2>a;a++)this.h.push(B(10)+"-ccd-testing-v4.metric.gstatic.com")};P.prototype=new q;d=P.prototype;d.B=function(){return!0};
d.o=function(){for(var a=0,b=0;b<this.g.length;b++)-106==this.g[b]&&a++;a>=1*this.g.length?(this.a.j=2,this.a.setTitle(chrome.i18n.getMessage("chromeinternetdisconnectedtest_problem_title")),a=chrome.i18n.getMessage("chromeinternetdisconnectedtest_problem_subtitle")):(this.a.j=0,this.a.setTitle(chrome.i18n.getMessage("chromeinternetdisconnectedtest_noproblem_title")),a=chrome.i18n.getMessage("chromeinternetdisconnectedtest_noproblem_subtitle"));this.a.l=a};d.A=function(a){this.f=a;this.X()};
d.ga=function(a){window.clearTimeout(this.b);m(this.a,"# "+this.c+chrome.i18n.getMessage("chromeinternetdisconnectedtest_log_connection_status_known")+ +a);this.g[this.c]=a;this.c++;this.c<this.h.length?this.b=window.setTimeout(this.X.bind(this),500):(this.o(),r(this))};d.X=function(){var a=this.h[this.c];m(this.a,chrome.i18n.getMessage("chromeinternetdisconnectedtest_log_connection_beginning")+this.c+" / "+a+" / 80");var a=new k(a,80,this.a),b=this.ga.bind(this);a.g=b;a.s="GET / HTTP/1.1";n(a)};var Q=function(){};Q.prototype=new q;Q.prototype.A=function(a){(new O(80,6)).A(a)};Q.prototype.B=function(){return!0};var R=function(){};R.prototype=new q;R.prototype.B=function(){return!0};R.prototype.A=function(a){(new O(443,7)).A(a)};var S=function(){};S.prototype=new q;S.prototype.B=function(){var a=null;A()?a=new G:a=new P;return a.B()};S.prototype.A=function(a){var b=null;A()?b=new G:b=new P;b.A(a)};var Za=function(a,b){this.f=new la;this.G=0;this.g=a;this.i=b;this.b=!1;this.c=0;this.h=Ma();this.J=h()},$a=[S,H,M,N,F,Pa,Xa,Q,R,Va,K,I];
Za.prototype.m=function(a){ka("TestVerdict."+a.b,a.j,Object.keys(ia).length-1,Object.keys(ia).length);var b=(new Date).getTime()-this.c;ja("TimeTaken."+a.b,b);this.J.log("Finished running test "+this.G+" in total of "+b+" milliseconds with verdict "+a.j);var c=this.h,e=a.b;void 0===c.b[e]&&(c.b[e]=new La(e,a.j,b));b=this.f;switch(a.j){case 0:b.b[0].push(a);break;case 1:b.b[1].push(a);break;case 2:b.b[2].push(a)}if(0===a.b&&2===a.j||3===a.b&&2===a.j||5===a.b&&2===a.j)this.b=!0,this.g(this.f);this.G++;
this.b||ab(this)};var ab=function(a){a.b=!1;var b=a.G/$a.length,b=Math.round(100*b);a.i(b);b=a.m.bind(a);if(a.G>=$a.length)a.g(a.f);else{var c=$a[a.G];a.J.log("Preparing to launch the "+a.G+" test");var e=function(){this.J.log("Not running test "+this.G+" and moving to next test");this.G++;ab(this)};void 0===c?e.apply(a):(c=new c,c.B()?(a.c=(new Date).getTime(),a.J.log("Launching test "+a.G+" at timestamp "+a.c),c.A(b)):e.apply(a))}};var bb=function(){this.b=document.createElement("div")};bb.prototype.w=function(a){this.b.id="about-container";w++;this.b.tabIndex=w;this.b.className="element-hidden";this.b.innerHTML=chrome.i18n.getMessage("about_app")+"<br>"+chrome.i18n.getMessage("about_version_num")+C();this.b.addEventListener("blur",this.f.bind(this),!0);a.appendChild(this.b);return this.b};bb.prototype.f=function(a){a&&"keyup"==a.type&&13!==a.keyCode||(this.b.className="element-hidden")};var T=function(){this.h=this.g=this.c=this.f=this.i=this.m=null;this.v=!1;this.C=null;this.s=Ea();this.M=x();this.I=Ma()};d=T.prototype;
d.w=function(a){this.g=document.createElement("div");this.g.id="ccd-header";var b=document.createElement("div");b.id="header-title-container";b.appendChild(document.createTextNode(chrome.i18n.getMessage("apptitle")));this.g.appendChild(b);b=document.createElement("div");b.id="header-options-container";this.g.appendChild(b);this.f=document.createElement("button");this.f.id="top-settings-btn";this.f.tabIndex=1;this.f.setAttribute("aria-expanded","false");this.f.setAttribute("aria-controls","settings-container");
this.f.setAttribute("aria-label",chrome.i18n.getMessage("aria_label_settings"));this.f.addEventListener("click",this.V.bind(this),!1);b.appendChild(this.f);this.m=document.createElement("button");this.m.id="top-maximize-btn";this.m.tabIndex=15;this.m.setAttribute("aria-label",chrome.i18n.getMessage("aria_label_maximize"));this.m.addEventListener("click",this.P.bind(this),!1);b.appendChild(this.m);this.i=document.createElement("button");this.i.id="top-close-btn";this.i.tabIndex=16;this.i.setAttribute("aria-label",
chrome.i18n.getMessage("aria_label_close"));this.i.addEventListener("click",function(){window.close()},!1);b.appendChild(this.i);this.b=document.createElement("div");this.b.id="settings-container";this.b.className="element-hidden";this.b.tabIndex=2;this.b.addEventListener("blur",this.R.bind(this),!0);b=document.createElement("div");this.c=document.createElement("a");this.c.id="toggle-passing-tests-link";this.c.tabIndex=3;cb(this);this.c.setAttribute("aria-controls","passing-tests-container");this.c.addEventListener("click",
this.$.bind(this),!1);this.c.addEventListener("keyup",this.$.bind(this),!1);b.appendChild(this.c);this.b.appendChild(b);b=document.createElement("div");this.h=document.createElement("a");this.h.tabIndex=4;this.h.innerHTML=chrome.i18n.getMessage("setting_rerun_tests");this.h.addEventListener("click",this.aa.bind(this),!1);this.h.addEventListener("keyup",this.aa.bind(this),!1);b.appendChild(this.h);this.b.appendChild(b);if(31<=Ia()){var b=document.createElement("div"),c=document.createElement("a");
c.tabIndex=5;c.innerHTML=chrome.i18n.getMessage("setting_send_feedback");c.addEventListener("click",this.ca.bind(this),!1);c.addEventListener("keyup",this.ca.bind(this),!1);b.appendChild(c);this.b.appendChild(b)}b=document.createElement("div");c=document.createElement("a");c.tabIndex=6;c.innerHTML=chrome.i18n.getMessage("setting_about");c.addEventListener("click",this.W.bind(this),!1);c.addEventListener("keyup",this.W.bind(this),!1);b.appendChild(c);this.C=new bb;this.C.w(this.g);this.b.appendChild(b);
this.g.appendChild(this.b);a.appendChild(this.g);return this.g};d.aa=function(a){a&&"keyup"==a.type&&13!==a.keyCode||this.s.g.apply(this.s)};d.W=function(a){a&&"keyup"==a.type&&13!==a.keyCode||(U(this),a=this.C,a.b.className="about-visible",a.b.focus())};d.ca=function(a){a&&"keyup"==a.type&&13!==a.keyCode||(U(this),this.I.f.apply(this.I))};d.$=function(a){a&&"keyup"==a.type&&13!==a.keyCode||(this.s.h.apply(this.s),cb(this),U(this),ya(this.M))};
var cb=function(a){a.s.b?(a.c.innerHTML=chrome.i18n.getMessage("setting_hide_passing_test"),a.c.setAttribute("aria-expanded","true")):(a.c.innerHTML=chrome.i18n.getMessage("setting_show_passing_test"),a.c.setAttribute("aria-expanded","false"))},U=function(a){a.b.className="element-hidden";a.f.className="";a.f.setAttribute("aria-expanded","false");a.v=!1},db=function(a,b){return b==document.body?!1:b==a.b?!0:db(a,b.parentNode)};
T.prototype.R=function(a){a.relatedTarget!=this.f&&(this.v&&null!=a.relatedTarget&&!db(this,a.relatedTarget)?U(this):this.v&&null==a.relatedTarget&&"ccd-app"==document.activeElement.id&&U(this))};T.prototype.V=function(){if(this.v)U(this);else{var a=this.M;a.g||(u("SettingsShown"),a.g=!0);this.b.className="settings-visible";this.f.className="settings-menu-link-expanded";this.f.setAttribute("aria-expanded","true");this.v=!0;this.b.focus()}};
T.prototype.P=function(){var a=chrome.app.window.current();if(A())a.isMaximized()?a.restore():a.maximize();else if(676==a.getBounds().width)a.maximize();else{a.resizeTo(676,600);var a=(screen.width-676)/2,b=(screen.height-600)/2;chrome.app.window.current().moveTo(a,b)}};var V=function(){this.b=this.c=null;this.g=0;this.f=null;this.m=Ea();var a=this.h.bind(this);this.m.c.push(a)};
V.prototype.h=function(){document.getElementById("ccd-app").innerHTML="";this.c=this.b=this.f=null;var a=new T,b=document.getElementById("ccd-app");a.w(b);this.f=document.createElement("div");this.f.id="page-body-container";b.appendChild(this.f);ta||(ta=new sa);a=ta;document.addEventListener("mousedown",a.f.bind(a),!1);document.addEventListener("keydown",a.b.bind(a),!1);a=document.getElementById("ccd-app");this.c=new Aa;this.b=this.c.w(a);Ba(this.c,0);this.g=setTimeout(this.C.bind(this),12E4);try{var c=
new Za(this.v.bind(this),this.s.bind(this));ab(c)}catch(e){console.error(e),c.b=!0,window.clearTimeout(this.g),this.b.parentNode.removeChild(this.b),c=document.getElementById("ccd-app"),this.i=new va,this.b=this.i.w(c),c=this.i,a=chrome.i18n.getMessage("tests_failed_message"),c.b&&(c.b.innerHTML=a)}};V.prototype.v=function(a){window.clearTimeout(this.g);this.b.parentNode.removeChild(this.b);var b=a.b[1].length;0===a.b[2].length&&0===b&&(new za).w(this.f);(new Ga(a)).w(this.f)};
V.prototype.s=function(a){Ba(this.c,a)};V.prototype.C=function(){window.clearTimeout(this.g)};var W=function(){var a=location.search;if(0<a.length){"?"==a[0]&&(a=a.slice(1));for(var a=a.split("&"),b=0;b<a.length;b++){var c=a[b].slice(0,a[b].indexOf("=")),e=a[b].slice(a[b].indexOf("=")+1);void 0!==f[c]&&(f[c]=isNaN(parseInt(e,10))?"false"==e.toLowerCase()?!1:"true"==e.toLowerCase()?!0:e:parseInt(e,10))}}u("TestSuiteRun");a=C().replace(/\./g,"");a=parseInt(a,10);ka("AppVersion",a,1E3,1);chrome.metricsPrivate&&(t.log("Histograms - recordUserAction: ConnectivityDiagnostics.UA.LaunchSource.Webstore"),
chrome.metricsPrivate.recordUserAction("ConnectivityDiagnostics.UA.LaunchSource.Webstore"));this.b=null};W.prototype.f=function(){this.b=new V;this.b.h()};var X=["ChromeConnectivityDebugger"],Y=this;X[0]in Y||!Y.execScript||Y.execScript("var "+X[0]);for(var Z;X.length&&(Z=X.shift());)X.length||void 0===W?Y[Z]?Y=Y[Z]:Y=Y[Z]={}:Y[Z]=W;W.prototype.launch=W.prototype.f;
