LPDialog=function(f){var h="",n=[],j={},p=["newvaultGlobal","dialog","buttons"],r=["dialog","dialogFields"],k,e=null,s=function(a,c){for(var b=0,v=a.length;b<v;++b){var g=a[b].getAttribute(c);if(g){var d=g.indexOf("?");-1!==d&&(g=g.substring(0,d));e[g]=!0}}};k={loadFile:function(a,c){null===e&&k.initialize();var b=h+a.name;void 0===e[b]?(e[b]=!0,j[b]=[c],a.load(function(){var a=j[b];delete j[b];for(var c=0,d=a.length;c<d;++c)a[c]()})):j[b]?j[b].push(c):c()},initialize:function(){null===e&&(e={},s(f.getElementsByTagName("link"),
"href"),s(f.getElementsByTagName("script"),"src"))}};var d=function(){this.files=[];this.addedFiles={}};d.prototype.load=function(a){var c=0,b=this.files,d=function(){++c;c===b.length?a&&a():k.loadFile(b[c],d)};0===c&&0<b.length&&k.loadFile(b[0],d)};d.prototype.addFile=function(a){void 0===this.addedFiles[a.name]&&(this.files.push(a),this.addedFiles[a.name]=!0)};d.prototype.addFiles=function(a){if(a){a=[].concat(a);for(var c=0,b=a.length;c<b;++c)this.addFile(a[c])}};var w=function(a){a.indexOf(".js")!==
a.length-3&&(a=a+=".js");this.name=LPPlatform.getResourceName(a);this.load=function(c){var b=f.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",h+LPPlatform.getResourcePath(a));LPPlatform.addEventListener(b,"load",c);f.body.appendChild(b)}},x=function(a){a.indexOf(".css")!==a.length-4&&(a=a+=".css");this.name=a;this.load=function(c){var b=f.createElement("link");b.setAttribute("type","text/css");b.setAttribute("rel","stylesheet");b.setAttribute("href",h+LPPlatform.getResourcePath(a));
LPPlatform.addEventListener(b,"load",c);f.body.appendChild(b)}},l=function(a){d.call(this);a=a?p.concat(a):p;for(var c=0,b=a.length;c<b;++c)this.addFile(a[c])};l.prototype=Object.create(d.prototype);l.prototype.constructor=l;l.prototype.addFile=function(a){a&&d.prototype.addFile.call(this,new x(a))};var m=function(a){d.call(this);a=a?r.concat(a):r;for(var c=0,b=a.length;c<b;++c)this.addFile(a[c])};m.prototype=Object.create(d.prototype);m.prototype.constructor=m;m.prototype.addFile=function(a){a&&
d.prototype.addFile.call(this,new w(a))};return{DialogLoader:function(a){var c=!1,b=null,d=new m(a.js),g=new l(a.css);this.parentElementID=a.parentElementID;this.type=a.type;var f=function(a,b){var c,d,u={},q=a?[].concat(a):[];b=b?[].concat(b):[];c=0;for(d=q.length;c<d;++c)u[q[c]]=!0;c=0;for(d=b.length;c<d;++c)u.hasOwnProperty(b[c])||q.push(b[c]);return q};this.extend=function(b){return new LPDialog.DialogLoader({id:b.id||a.id,htmlSource:f(a.htmlSource,b.htmlSource),css:f(a.css,b.css),js:f(a.js,b.js),
type:b.type||a.type,parentElementID:b.parentElementID||a.parentElementID})};this.loadedJS=function(){return c};this.getID=function(){return a.id};var e,j=this;e=function(d){b=new window[a.type](j);c=!0;d(b)};this.loadJS=function(a){d?(Topics.get(Topics.DIALOG_LOADING).publish(),d.load(function(){e(a)})):e(a)};var k=function(b,c,d,t){d<c.length?LPPlatform.getHTML(h+a.htmlSource[d],function(a){a=$(a);a.find("[dialogsection]").addBack("[dialogsection]").each(function(){var a=this.getAttribute("dialogsection"),
a=b.find("[dialogsection="+a+"]");a.before(this);a.remove()});a.find("[dialogsectionbefore]").addBack("[dialogsectionbefore]").each(function(){var a=this.getAttribute("dialogsectionbefore");b.find("[dialogsection="+a+"]").before(this)});a.find("[dialogsectionafter]").addBack("[dialogsectionafter]").each(function(){var a=this.getAttribute("dialogsectionafter");b.find("[dialogsection="+a+"]").after(this)});a.find("[dialogsectionappend]").addBack("[dialogsectionappend]").each(function(){var a=this.getAttribute("dialogsectionappend");
b.find("[dialogsection="+a+"]").append(this)});a.find("[dialogsectionprepend]").addBack("[dialogsectionprepend]").each(function(){var a=this.getAttribute("dialogsectionprepend");b.find("[dialogsection="+a+"]").prepend(this)});k(b,c,++d,t)}):t()},p=function(b,c){var d=function(){var a=b.find("img");if(0<a.length){var d,f=0;d=function(){++f;f===a.length&&c()};for(var e=0,g=a.length;e<g;++e)$(a[e]).bind("load",d)}else c()};a.htmlSource instanceof Array?LPPlatform.getHTML(h+a.htmlSource[0],function(c){b.html(c);
k(b,a.htmlSource,1,d)}):LPPlatform.getHTML(h+a.htmlSource,function(a){b.html(a);d()})};this.load=function(a,b){g?g.load(function(){p(a,b)}):p(a,b)};this.open=function(){this.loadedJS()?b.open.apply(b,arguments):(n.push(this),this.loadJS(function(a,c){return function(){b.open.apply(b,c);for(var d=0,e=n.length;d<e;++d)n[d]===a&&n.splice(d,1)}}(this,arguments)))};this.close=function(){b&&b.close.apply(b,arguments)};this.getDialog=function(){return b}},JSFileSet:m,CSSFileSet:l,getPendingCount:function(){return n.length},
getDialogs:function(){var a=[],c;for(c in dialogs)a.push(dialogs[c]);return a},setBaseURL:function(a){h=a}}}(document);
dialogs={site:new LPDialog.DialogLoader({id:"siteDialog",htmlSource:"siteDialog.html",css:["buttons","dialog","siteDialog","passwordMeter"],js:"selectDropdown typeaheadDropdown dialog dialogWithGroupInput editableFieldsDialog siteDialog passwordMeter bloodhound bloodhoundDropdown".split(" "),type:"SiteDialog"}),note:new LPDialog.DialogLoader({id:"noteDialog",htmlSource:"noteDialog.html",css:["buttons","dialog","noteDialog"],js:["selectDropdown","typeaheadDropdown","dialog","dialogWithGroupInput",
"noteDialog"],type:"NoteDialog"}),formFill:new LPDialog.DialogLoader({id:"formFillDialog",htmlSource:"formFillDialog.html",css:["buttons","dialog","formFillDialog"],js:["selectDropdown","typeaheadDropdown","dialog","formFillDialog","phoneFormatDropdown"],type:"FormFillDialog"}),acceptShare:new LPDialog.DialogLoader({id:"acceptShareDialog",htmlSource:"acceptRejectShareDialog.html",css:["buttons","dialog","acceptRejectShareDialog"],js:["selectDropdown","typeaheadDropdown","dialog","dialogWithGroupInput",
"acceptRejectShareDialog"],type:"AcceptShareDialog"}),share:new LPDialog.DialogLoader({id:"shareDialog",htmlSource:"shareDialog.html",css:["buttons","dialog","shareDialog","containerSelectionDialog","vaultItem"],js:"selectDropdown typeaheadDropdown dialog shareDialog bloodhound bloodhoundDropdown vaultItemTypeahead sharingModel".split(" "),type:"ShareDialog"}),identity:new LPDialog.DialogLoader({id:"identityDialog",htmlSource:"identityDialog.html",css:["buttons","dialog","containerSelectionDialog",
"identityDialog"],js:["dialog","containerSelectionDialog","identityDialog"],type:"IdentityDialog"}),sharedfolderAccess:new LPDialog.DialogLoader({id:"sharedFolderAccessDialog",htmlSource:"sharedFolderAccessDialog.html",css:["buttons","dialog","containerSelectionDialog","sharedFolderAccessDialog"],js:["dialog","containerSelectionDialog","sharedFolderAccessDialog"],type:"SharedFolderAccessDialog"}),sharedFolder:new LPDialog.DialogLoader({id:"sharedFolderDialog",htmlSource:"sharedFolderDialog.html",
css:["buttons","dialog","sharedFolderDialog"],js:"dialog sharedFolderDialog bloodhound selectDropdown typeaheadDropdown bloodhoundDropdown".split(" "),type:"SharedFolderDialog"}),createSharedFolder:new LPDialog.DialogLoader({id:"createSharedFolderDialog",htmlSource:"createSharedFolderDialog.html",css:["buttons","dialog"],js:["dialog","dialogWithGroupInput","folderDialog"],type:"CreateSharedFolderDialog"}),createCreditMonitoring:new LPDialog.DialogLoader({id:"createCreditMonitoringDialog",htmlSource:"createCreditMonitoringDialog.html",
css:["buttons","dialog","createCreditMonitoringDialog"],js:["dialog","createCreditMonitoringDialog"],type:"CreateCreditMonitoringDialog"}),generatePassword:new LPDialog.DialogLoader({id:"generatePasswordDialog",htmlSource:"generatePasswordDialog.html",css:["buttons","dialog","generatePasswordDialog","passwordMeter"],js:["dialog","generatePasswordDialog","selectDropdown","passwordMeter"],type:"GeneratePasswordDialog"}),login:new LPDialog.DialogLoader({id:"loginDialog",htmlSource:"loginDialog.html",
css:["loginDialog"],js:["loginDialog","capslockstate"],type:"LoginDialog"}),reprompt:new LPDialog.DialogLoader({id:"repromptDialog",htmlSource:"repromptDialog.html",css:["repromptDialog"],js:["repromptDialog"],type:"RepromptDialog"}),createAccount:new LPDialog.DialogLoader({id:"createAccountDialog",htmlSource:"createAccountDialog.html",css:["buttons","dialog","createAccountDialog","passwordMeter"],js:["dialog","createAccountDialog","selectDropdown","passwordMeter"],type:"CreateAccountDialog"}),folder:new LPDialog.DialogLoader({id:"folderDialog",
type:"FolderDialog",css:["buttons","dialog"],js:["dialog","selectDropdown","typeaheadDropdown","dialogWithGroupInput","folderDialog"],htmlSource:"folderDialog.html"}),fieldHistory:new LPDialog.DialogLoader({id:"fieldHistoryDialog",htmlSource:"fieldHistoryDialog.html",css:["buttons","dialog","fieldHistoryDialog"],js:["dialog","fieldHistoryDialog"],type:"FieldHistoryDialog"}),linkAccount:new LPDialog.DialogLoader({id:"linkAccountDialog",htmlSource:"linkAccountDialog.html",css:["buttons","dialog","linkAccountDialog"],
js:["dialog","linkAccountDialog"],type:"LinkAccountDialog"}),confirmation:new LPDialog.DialogLoader({id:"confirmationDialog",htmlSource:"confirmationDialog.html",css:["buttons","dialog"],js:["dialog","confirmationDialog"],type:"ConfirmationDialog"}),alert:new LPDialog.DialogLoader({id:"alertDialog",htmlSource:"alertDialog.html",css:["buttons","dialog"],js:["dialog","confirmationDialog"],type:"AlertDialog"}),enterpriseTrial:new LPDialog.DialogLoader({id:"enterpriseTrialDialog",htmlSource:"enterpriseTrialDialog.html",
css:["buttons","dialog"],js:["dialog","enterpriseTrialDialog"],type:"EnterpriseTrialDialog"}),denyEmergencyAccess:new LPDialog.DialogLoader({id:"denyEmergencyAccessDialog",htmlSource:"denyEmergencyAccessDialog.html",css:["buttons","dialog"],js:["dialog","denyEmergencyAccessDialog"],type:"DenyEmergencyAccessDialog"}),verifyEmail:new LPDialog.DialogLoader({id:"verifyEmailDialog",htmlSource:"verifyEmailDialog.html",css:["buttons","dialog"],js:["dialog","verifyEmailDialog"],type:"VerifyEmailDialog"}),
application:new LPDialog.DialogLoader({id:"applicationDialog",htmlSource:"applicationDialog.html",css:["buttons","dialog","passwordMeter"],js:"dialog dialogWithGroupInput editableFieldsDialog passwordMeter applicationDialog selectDropdown typeaheadDropdown".split(" "),type:"ApplicationDialog"}),chooseProfile:new LPDialog.DialogLoader({id:"chooseProfileDialog",htmlSource:"chooseProfileDialog.html",css:["buttons","dialog","chooseProfileDialog"],js:["dialog","chooseProfileDialog"],type:"ChooseProfileDialog"}),
vaultItemSelect:new LPDialog.DialogLoader({id:"vaultItemSelectDialog",htmlSource:"vaultItemSelectDialog.html",css:["buttons","dialog","vaultItem"],js:["dialog","vaultItemSelectDialog"],type:"VaultItemSelectDialog"}),inviteFriends:new LPDialog.DialogLoader({id:"inviteFriendsDialog",htmlSource:"inviteFriendsDialog.html",css:["buttons","dialog"],js:["dialog","inviteFriendsDialog"],type:"InviteFriendsDialog"}),addEmergencyAccess:new LPDialog.DialogLoader({id:"addEmergencyAccessDialog",htmlSource:"addEmergencyAccessDialog.html",
css:["buttons","dialog"],js:["dialog","addEmergencyAccessDialog"],type:"AddEmergencyAccessDialog"}),upgradePremium:new LPDialog.DialogLoader({id:"upgradePremiumDialog",htmlSource:"upgradePremiumDialog.html",css:["buttons","dialog"],js:["dialog","upgradePremiumDialog"],type:"UpgradePremiumDialog"}),sharingKey:new LPDialog.DialogLoader({id:"sharingKeyDialog",htmlSource:"sharingKeyDialog.html",css:["buttons","dialog"],js:["dialog","sharingKeyDialog"],type:"SharingKeyDialog"}),addFormField:new LPDialog.DialogLoader({id:"addFormFieldDialog",
htmlSource:"addFormFieldDialog.html",js:["dialog","dialogWithGroupInput","editableFieldsDialog"],type:"AddFormFieldDialog"}),wait:new LPDialog.DialogLoader({id:"waitDialog",htmlSource:"waitDialog.html",js:["dialog","waitDialog"],css:["dialog"],type:"WaitDialog"})};
$.extend(dialogs,{notification:new LPDialog.DialogLoader({id:"notificationDialog",htmlSource:"notificationDialog.html",css:["buttons","dialog","notificationDialog"],js:["dialog","notificationDialog"],type:"NotificationDialog"}),duplicatePassword:new LPDialog.DialogLoader({id:"duplicatePasswordDialog",htmlSource:"duplicatePasswordDialog.html",css:["buttons","dialog","duplicatePasswordDialog"],js:["dialog","duplicatePasswordDialog"],type:"DuplicatePasswordDialog"}),weakPassword:new LPDialog.DialogLoader({id:"weakPasswordDialog",
htmlSource:"weakPasswordDialog.html",css:["buttons","dialog","weakPasswordDialog"],js:["dialog","weakPasswordDialog"],type:"WeakPasswordDialog"}),preferences:new LPDialog.DialogLoader({id:"preferencesDialog",htmlSource:"preferencesDialog.html",css:["buttons","dialog","preferencesDialog"],js:["dialog","preferencesDialog"],type:"PreferencesDialog"}),introTutorialWelcome:new LPDialog.DialogLoader({id:"introTutorialWelcomeDialog",htmlSource:"IntroTutorial/introTutorialWelcomeDialog.html",css:["buttons",
"dialog","IntroTutorial/introTutorialHelpDialog","IntroTutorial/introTutorial"],js:["dialog","IntroTutorial/introTutorialHelpDialog","IntroTutorial/introTutorialWelcomeDialog"],type:"IntroTutorialWelcomeDialog"}),introTutorialSelectSite:new LPDialog.DialogLoader({id:"introTutorialSelectSiteDialog",htmlSource:"IntroTutorial/introTutorialSelectSiteDialog.html",css:["buttons","dialog","IntroTutorial/introTutorialHelpDialog","IntroTutorial/introTutorial"],js:["dialog","IntroTutorial/introTutorialHelpDialog",
"IntroTutorial/introTutorialSelectSiteDialog"],type:"IntroTutorialSelectSiteDialog"}),introTutorialComplete:new LPDialog.DialogLoader({id:"introTutorialCompleteDialog",htmlSource:"IntroTutorial/introTutorialCompleteDialog.html",css:["buttons","dialog","IntroTutorial/introTutorialHelpDialog","IntroTutorial/introTutorial"],js:["dialog","IntroTutorial/introTutorialHelpDialog","IntroTutorial/introTutorialCompleteDialog"],type:"IntroTutorialCompleteDialog"})});
dialogs.login=dialogs.login.extend({htmlSource:"extensionLoginDialog.html",css:"extensionLoginDialog",js:["extensionLoginDialog","selectDropdown","typeaheadDropdown"],type:"ExtensionLoginDialog"});dialogs.siteTutorial=dialogs.site.extend({css:"IntroTutorial/introTutorialHelpDialog",js:["IntroTutorial/introTutorialHelpDialog","extensionSiteTutorialDialog"],type:"ExtensionSiteTutorialDialog"});
